import {
  addEdge,
  applyEdgeChanges,
  applyNodeChanges,
  Background,
  Controls,
  getConnectedEdges,
  ReactFlow,
  useReactFlow,
  useUpdateNodeInternals,
} from '@xyflow/react';
import '@xyflow/react/dist/style.css';

import { useCallback, useEffect, useState } from 'react';
import { useParams } from 'react-router-dom';
import styles from './flow.module.scss';
import { allNodes } from './NodesList';

import { useRecoilValue, useRecoilState } from 'recoil';

import {
  AppAtom,
  deleteAtom,
  developerModeAtom,
  dragNodeTypeAtom,
  highlightedNodeTypeAtom,
  networkFlowDataAtom,
  networkLockedAtom,
  newNodeAtom,
  nodeConfigAtom,
  plantListAtom,
  selectedEdgeIdAtom,
  selectedNodeIdAtom,
  selectedPageAtom,
  updateConfigAtom,
} from '../../pages/network/store';


import BearingNode from './nodes/Bearing';
import CouplingNode from './nodes/Coupling';
import CompressorNode from './nodes/Compressor';
import BoxNode from './nodes/Box';
import { HeatExchangerNode } from './nodes/HeatExchanger';
import { TurbineNode } from './nodes/Turbine';
import { SurfaceCondenserNode } from './nodes/SurfaceCondenser';
import { KODNode } from './nodes/Kod';
import { CentrifugalPumpNode } from './nodes/CentrifugalPump';
import { ESVNode } from './nodes/Esv';
import { EjectorNode } from './nodes/Ejector';
import { TextboxNode } from './nodes/TextBox';
import FlowingPipeEdge from './edges/FlowingPipEdge';
import Marker from './marker';
import { NDEJournalBearingNode } from './nodes/NDEJournalBearing';
import { CompressorConfigNode } from './nodes/CompressorConfig';
import { V2Node } from './nodes/V2';

function generateRandom8DigitNumber() {
  const array = new Uint32Array(1);
  window.crypto.getRandomValues(array);
  return array[0] % 90000000 + 10000000;
}

const initialFlowData = {
    "nodes": "[{\"name\":\"Bearing Node\",\"nodeType\":\"bearing-node\",\"type\":\"bearingNode\",\"position\":{\"x\":-1996.380846500552,\"y\":-310.8229079000593},\"data\":{\"nodeColor\":\"#d3d3d3\",\"strokeColor\":\"#000000\",\"subSystem\":null,\"svgPath\":\"data:image/svg+xml,%3csvg%20width='45'%20height='46'%20viewBox='0%200%2045%2046'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20clip-path='url(%23clip0_5425_292188)'%3e%3crect%20x='13.3594'%20y='0.5'%20width='18.2812'%20height='45'%20fill='%23DCDCDC'/%3e%3cline%20opacity='0.5'%20x1='14.1973'%20y1='1.72857'%20x2='31.0723'%20y2='45.3223'%20stroke='%234D4D4D'%20stroke-width='0.984375'/%3e%3cline%20opacity='0.5'%20x1='13.2793'%20y1='45.3223'%20x2='30.1543'%20y2='1.72858'%20stroke='%234D4D4D'%20stroke-width='0.984375'/%3e%3c/g%3e%3crect%20x='13.7109'%20y='0.851562'%20width='17.5781'%20height='44.2969'%20stroke='%234D4D4D'%20stroke-width='0.703125'/%3e%3cdefs%3e%3cclipPath%20id='clip0_5425_292188'%3e%3crect%20x='13.3594'%20y='0.5'%20width='18.2812'%20height='45'%20fill='white'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e\",\"gradientStart\":\"#fff700\",\"gradientEnd\":\"#fffa00\"},\"svg\":\"data:image/svg+xml,%3csvg%20width='45'%20height='46'%20viewBox='0%200%2045%2046'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20clip-path='url(%23clip0_5425_292188)'%3e%3crect%20x='13.3594'%20y='0.5'%20width='18.2812'%20height='45'%20fill='%23DCDCDC'/%3e%3cline%20opacity='0.5'%20x1='14.1973'%20y1='1.72857'%20x2='31.0723'%20y2='45.3223'%20stroke='%234D4D4D'%20stroke-width='0.984375'/%3e%3cline%20opacity='0.5'%20x1='13.2793'%20y1='45.3223'%20x2='30.1543'%20y2='1.72858'%20stroke='%234D4D4D'%20stroke-width='0.984375'/%3e%3c/g%3e%3crect%20x='13.7109'%20y='0.851562'%20width='17.5781'%20height='44.2969'%20stroke='%234D4D4D'%20stroke-width='0.703125'/%3e%3cdefs%3e%3cclipPath%20id='clip0_5425_292188'%3e%3crect%20x='13.3594'%20y='0.5'%20width='18.2812'%20height='45'%20fill='white'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e\",\"id\":\"bearing-node-94351622\",\"measured\":{\"width\":300,\"height\":735},\"selected\":false,\"dragging\":false},{\"name\":\"Bearing Node\",\"nodeType\":\"bearing-node\",\"type\":\"bearingNode\",\"position\":{\"x\":561.9315153376339,\"y\":-136.47404599940668},\"data\":{\"nodeColor\":\"#d3d3d3\",\"strokeColor\":\"#000000\",\"subSystem\":null,\"svgPath\":\"data:image/svg+xml,%3csvg%20width='45'%20height='46'%20viewBox='0%200%2045%2046'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20clip-path='url(%23clip0_5425_292188)'%3e%3crect%20x='13.3594'%20y='0.5'%20width='18.2812'%20height='45'%20fill='%23DCDCDC'/%3e%3cline%20opacity='0.5'%20x1='14.1973'%20y1='1.72857'%20x2='31.0723'%20y2='45.3223'%20stroke='%234D4D4D'%20stroke-width='0.984375'/%3e%3cline%20opacity='0.5'%20x1='13.2793'%20y1='45.3223'%20x2='30.1543'%20y2='1.72858'%20stroke='%234D4D4D'%20stroke-width='0.984375'/%3e%3c/g%3e%3crect%20x='13.7109'%20y='0.851562'%20width='17.5781'%20height='44.2969'%20stroke='%234D4D4D'%20stroke-width='0.703125'/%3e%3cdefs%3e%3cclipPath%20id='clip0_5425_292188'%3e%3crect%20x='13.3594'%20y='0.5'%20width='18.2812'%20height='45'%20fill='white'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e\",\"gradientStart\":\"#10f500\",\"gradientEnd\":\"#00ff04\"},\"svg\":\"data:image/svg+xml,%3csvg%20width='45'%20height='46'%20viewBox='0%200%2045%2046'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20clip-path='url(%23clip0_5425_292188)'%3e%3crect%20x='13.3594'%20y='0.5'%20width='18.2812'%20height='45'%20fill='%23DCDCDC'/%3e%3cline%20opacity='0.5'%20x1='14.1973'%20y1='1.72857'%20x2='31.0723'%20y2='45.3223'%20stroke='%234D4D4D'%20stroke-width='0.984375'/%3e%3cline%20opacity='0.5'%20x1='13.2793'%20y1='45.3223'%20x2='30.1543'%20y2='1.72858'%20stroke='%234D4D4D'%20stroke-width='0.984375'/%3e%3c/g%3e%3crect%20x='13.7109'%20y='0.851562'%20width='17.5781'%20height='44.2969'%20stroke='%234D4D4D'%20stroke-width='0.703125'/%3e%3cdefs%3e%3cclipPath%20id='clip0_5425_292188'%3e%3crect%20x='13.3594'%20y='0.5'%20width='18.2812'%20height='45'%20fill='white'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e\",\"id\":\"bearing-node-45704559\",\"measured\":{\"width\":300,\"height\":735},\"selected\":false,\"dragging\":false,\"style\":{\"width\":225,\"height\":360}},{\"name\":\"Box Node\",\"nodeType\":\"box-node\",\"type\":\"boxNode\",\"position\":{\"x\":6814.28571032555,\"y\":-247.33447622381743},\"data\":{\"nodeColor\":\"#d3d3d3\",\"strokeColor\":\"#000000\",\"subSystem\":null,\"svgPath\":\"data:image/svg+xml,%3csvg%20width='45'%20height='45'%20viewBox='0%200%2045%2045'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20x='11.4327'%20y='0.432692'%20width='21.6346'%20height='44.1346'%20fill='%23E0E0E0'/%3e%3crect%20x='11.4327'%20y='0.432692'%20width='21.6346'%20height='44.1346'%20stroke='%234D4D4D'%20stroke-width='0.865385'/%3e%3c/svg%3e\"},\"svg\":\"data:image/svg+xml,%3csvg%20width='45'%20height='45'%20viewBox='0%200%2045%2045'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20x='11.4327'%20y='0.432692'%20width='21.6346'%20height='44.1346'%20fill='%23E0E0E0'/%3e%3crect%20x='11.4327'%20y='0.432692'%20width='21.6346'%20height='44.1346'%20stroke='%234D4D4D'%20stroke-width='0.865385'/%3e%3c/svg%3e\",\"id\":\"box-node-48093226\",\"measured\":{\"width\":300,\"height\":612},\"selected\":false,\"dragging\":false},{\"name\":\"Compressor Node\",\"nodeType\":\"compressor-node\",\"type\":\"compressorNode\",\"position\":{\"x\":5354.755297834933,\"y\":-488.7416667141615},\"data\":{\"nodeColor\":\"#d3d3d3\",\"strokeColor\":\"#000000\",\"subSystem\":null,\"svgPath\":\"data:image/svg+xml,%3csvg%20width='47'%20height='45'%20viewBox='0%200%2047%2045'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M23.5371%2016.5084L23.5371%2027.4846L0.926554%2033.9135L0.926556%208.82508L23.5371%2016.5084Z'%20fill='url(%23paint0_linear_5425_292293)'%20stroke='%234D4D4D'%20stroke-width='0.309734'/%3e%3cpath%20d='M23.4004%2027.5656V16.5894L46.0109%2010.1605V35.2489L23.4004%2027.5656Z'%20fill='url(%23paint1_linear_5425_292293)'%20stroke='%234D4D4D'%20stroke-width='0.309734'/%3e%3cdefs%3e%3clinearGradient%20id='paint0_linear_5425_292293'%20x1='12.2318'%20y1='33.9135'%20x2='12.2318'%20y2='8.82508'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%23ADADAD'/%3e%3cstop%20offset='0.509615'%20stop-color='%23E3E3E3'/%3e%3cstop%20offset='1'%20stop-color='%23ADADAD'/%3e%3c/linearGradient%3e%3clinearGradient%20id='paint1_linear_5425_292293'%20x1='34.7057'%20y1='10.1605'%20x2='34.7057'%20y2='35.2489'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%23ADADAD'/%3e%3cstop%20offset='0.509615'%20stop-color='%23E3E3E3'/%3e%3cstop%20offset='1'%20stop-color='%23ADADAD'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e\",\"gradientStart\":\"#f8f6f6\",\"gradientEnd\":\"#ADADAD\"},\"svg\":\"data:image/svg+xml,%3csvg%20width='47'%20height='45'%20viewBox='0%200%2047%2045'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M23.5371%2016.5084L23.5371%2027.4846L0.926554%2033.9135L0.926556%208.82508L23.5371%2016.5084Z'%20fill='url(%23paint0_linear_5425_292293)'%20stroke='%234D4D4D'%20stroke-width='0.309734'/%3e%3cpath%20d='M23.4004%2027.5656V16.5894L46.0109%2010.1605V35.2489L23.4004%2027.5656Z'%20fill='url(%23paint1_linear_5425_292293)'%20stroke='%234D4D4D'%20stroke-width='0.309734'/%3e%3cdefs%3e%3clinearGradient%20id='paint0_linear_5425_292293'%20x1='12.2318'%20y1='33.9135'%20x2='12.2318'%20y2='8.82508'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%23ADADAD'/%3e%3cstop%20offset='0.509615'%20stop-color='%23E3E3E3'/%3e%3cstop%20offset='1'%20stop-color='%23ADADAD'/%3e%3c/linearGradient%3e%3clinearGradient%20id='paint1_linear_5425_292293'%20x1='34.7057'%20y1='10.1605'%20x2='34.7057'%20y2='35.2489'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%23ADADAD'/%3e%3cstop%20offset='0.509615'%20stop-color='%23E3E3E3'/%3e%3cstop%20offset='1'%20stop-color='%23ADADAD'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e\",\"id\":\"compressor-node-94794780\",\"measured\":{\"width\":300,\"height\":176},\"selected\":false,\"style\":{\"width\":1457,\"height\":1022},\"dragging\":false},{\"name\":\"Box Node\",\"nodeType\":\"box-node\",\"type\":\"boxNode\",\"position\":{\"x\":-4857.203780249872,\"y\":-276.05193509874323},\"data\":{\"nodeColor\":\"#d3d3d3\",\"strokeColor\":\"#000000\",\"subSystem\":null,\"svgPath\":\"data:image/svg+xml,%3csvg%20width='45'%20height='45'%20viewBox='0%200%2045%2045'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20x='11.4327'%20y='0.432692'%20width='21.6346'%20height='44.1346'%20fill='%23E0E0E0'/%3e%3crect%20x='11.4327'%20y='0.432692'%20width='21.6346'%20height='44.1346'%20stroke='%234D4D4D'%20stroke-width='0.865385'/%3e%3c/svg%3e\"},\"svg\":\"data:image/svg+xml,%3csvg%20width='45'%20height='45'%20viewBox='0%200%2045%2045'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20x='11.4327'%20y='0.432692'%20width='21.6346'%20height='44.1346'%20fill='%23E0E0E0'/%3e%3crect%20x='11.4327'%20y='0.432692'%20width='21.6346'%20height='44.1346'%20stroke='%234D4D4D'%20stroke-width='0.865385'/%3e%3c/svg%3e\",\"id\":\"box-node-95310362\",\"measured\":{\"width\":300,\"height\":612},\"selected\":false,\"dragging\":false},{\"name\":\"Bearing Node\",\"nodeType\":\"bearing-node\",\"type\":\"bearingNode\",\"position\":{\"x\":-5078.1774076978045,\"y\":-147.961029549377},\"data\":{\"nodeColor\":\"#d3d3d3\",\"strokeColor\":\"#000000\",\"subSystem\":null,\"svgPath\":\"data:image/svg+xml,%3csvg%20width='45'%20height='46'%20viewBox='0%200%2045%2046'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20clip-path='url(%23clip0_5425_292188)'%3e%3crect%20x='13.3594'%20y='0.5'%20width='18.2812'%20height='45'%20fill='%23DCDCDC'/%3e%3cline%20opacity='0.5'%20x1='14.1973'%20y1='1.72857'%20x2='31.0723'%20y2='45.3223'%20stroke='%234D4D4D'%20stroke-width='0.984375'/%3e%3cline%20opacity='0.5'%20x1='13.2793'%20y1='45.3223'%20x2='30.1543'%20y2='1.72858'%20stroke='%234D4D4D'%20stroke-width='0.984375'/%3e%3c/g%3e%3crect%20x='13.7109'%20y='0.851562'%20width='17.5781'%20height='44.2969'%20stroke='%234D4D4D'%20stroke-width='0.703125'/%3e%3cdefs%3e%3cclipPath%20id='clip0_5425_292188'%3e%3crect%20x='13.3594'%20y='0.5'%20width='18.2812'%20height='45'%20fill='white'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e\"},\"svg\":\"data:image/svg+xml,%3csvg%20width='45'%20height='46'%20viewBox='0%200%2045%2046'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20clip-path='url(%23clip0_5425_292188)'%3e%3crect%20x='13.3594'%20y='0.5'%20width='18.2812'%20height='45'%20fill='%23DCDCDC'/%3e%3cline%20opacity='0.5'%20x1='14.1973'%20y1='1.72857'%20x2='31.0723'%20y2='45.3223'%20stroke='%234D4D4D'%20stroke-width='0.984375'/%3e%3cline%20opacity='0.5'%20x1='13.2793'%20y1='45.3223'%20x2='30.1543'%20y2='1.72858'%20stroke='%234D4D4D'%20stroke-width='0.984375'/%3e%3c/g%3e%3crect%20x='13.7109'%20y='0.851562'%20width='17.5781'%20height='44.2969'%20stroke='%234D4D4D'%20stroke-width='0.703125'/%3e%3cdefs%3e%3cclipPath%20id='clip0_5425_292188'%3e%3crect%20x='13.3594'%20y='0.5'%20width='18.2812'%20height='45'%20fill='white'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e\",\"id\":\"bearing-node-79809388\",\"measured\":{\"width\":300,\"height\":735},\"selected\":false,\"dragging\":false,\"style\":{\"width\":225,\"height\":360}},{\"name\":\"Coupling Node\",\"nodeType\":\"coupling-node\",\"type\":\"couplingNode\",\"position\":{\"x\":7332.711134560546,\"y\":-46.312264099336375},\"data\":{\"isActive\":false,\"linkedTag\":null,\"subSystem\":null,\"nodeColor\":\"#a9a6a6\",\"strokeColor\":\"#000000\",\"svgPath\":\"data:image/svg+xml,%3csvg%20width='46'%20height='45'%20viewBox='0%200%2046%2045'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20x='4.03854'%20y='16.3847'%20width='37.3846'%20height='12'%20fill='%239A9797'%20stroke='%234D4D4D'%20stroke-width='0.692308'/%3e%3crect%20x='40.7309'%20y='12.3463'%20width='4.15385'%20height='20.0769'%20fill='%239A9797'%20stroke='%234D4D4D'%20stroke-width='0.692308'/%3e%3crect%20x='0.346154'%20y='12.3463'%20width='4.15385'%20height='20.0769'%20fill='%239A9797'%20stroke='%234D4D4D'%20stroke-width='0.692308'/%3e%3c/svg%3e\"},\"svg\":\"data:image/svg+xml,%3csvg%20width='46'%20height='45'%20viewBox='0%200%2046%2045'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20x='4.03854'%20y='16.3847'%20width='37.3846'%20height='12'%20fill='%239A9797'%20stroke='%234D4D4D'%20stroke-width='0.692308'/%3e%3crect%20x='40.7309'%20y='12.3463'%20width='4.15385'%20height='20.0769'%20fill='%239A9797'%20stroke='%234D4D4D'%20stroke-width='0.692308'/%3e%3crect%20x='0.346154'%20y='12.3463'%20width='4.15385'%20height='20.0769'%20fill='%239A9797'%20stroke='%234D4D4D'%20stroke-width='0.692308'/%3e%3c/svg%3e\",\"id\":\"coupling-node-44478573\",\"measured\":{\"width\":300,\"height\":135},\"selected\":false,\"style\":{\"width\":592,\"height\":180},\"dragging\":false},{\"name\":\"Bearing Node\",\"nodeType\":\"bearing-node\",\"type\":\"bearingNode\",\"position\":{\"x\":-2809.4981565786616,\"y\":-107.75658712448083},\"data\":{\"nodeColor\":\"#d3d3d3\",\"strokeColor\":\"#000000\",\"subSystem\":null,\"svgPath\":\"data:image/svg+xml,%3csvg%20width='45'%20height='46'%20viewBox='0%200%2045%2046'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20clip-path='url(%23clip0_5425_292188)'%3e%3crect%20x='13.3594'%20y='0.5'%20width='18.2812'%20height='45'%20fill='%23DCDCDC'/%3e%3cline%20opacity='0.5'%20x1='14.1973'%20y1='1.72857'%20x2='31.0723'%20y2='45.3223'%20stroke='%234D4D4D'%20stroke-width='0.984375'/%3e%3cline%20opacity='0.5'%20x1='13.2793'%20y1='45.3223'%20x2='30.1543'%20y2='1.72858'%20stroke='%234D4D4D'%20stroke-width='0.984375'/%3e%3c/g%3e%3crect%20x='13.7109'%20y='0.851562'%20width='17.5781'%20height='44.2969'%20stroke='%234D4D4D'%20stroke-width='0.703125'/%3e%3cdefs%3e%3cclipPath%20id='clip0_5425_292188'%3e%3crect%20x='13.3594'%20y='0.5'%20width='18.2812'%20height='45'%20fill='white'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e\"},\"svg\":\"data:image/svg+xml,%3csvg%20width='45'%20height='46'%20viewBox='0%200%2045%2046'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20clip-path='url(%23clip0_5425_292188)'%3e%3crect%20x='13.3594'%20y='0.5'%20width='18.2812'%20height='45'%20fill='%23DCDCDC'/%3e%3cline%20opacity='0.5'%20x1='14.1973'%20y1='1.72857'%20x2='31.0723'%20y2='45.3223'%20stroke='%234D4D4D'%20stroke-width='0.984375'/%3e%3cline%20opacity='0.5'%20x1='13.2793'%20y1='45.3223'%20x2='30.1543'%20y2='1.72858'%20stroke='%234D4D4D'%20stroke-width='0.984375'/%3e%3c/g%3e%3crect%20x='13.7109'%20y='0.851562'%20width='17.5781'%20height='44.2969'%20stroke='%234D4D4D'%20stroke-width='0.703125'/%3e%3cdefs%3e%3cclipPath%20id='clip0_5425_292188'%3e%3crect%20x='13.3594'%20y='0.5'%20width='18.2812'%20height='45'%20fill='white'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e\",\"id\":\"bearing-node-47183353\",\"measured\":{\"width\":300,\"height\":735},\"selected\":false,\"dragging\":false,\"style\":{\"width\":225,\"height\":360}},{\"name\":\"Box Node\",\"nodeType\":\"box-node\",\"type\":\"boxNode\",\"position\":{\"x\":-3105.438788879395,\"y\":-235.84749267384706},\"data\":{\"nodeColor\":\"#d3d3d3\",\"strokeColor\":\"#000000\",\"subSystem\":null,\"svgPath\":\"data:image/svg+xml,%3csvg%20width='45'%20height='45'%20viewBox='0%200%2045%2045'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20x='11.4327'%20y='0.432692'%20width='21.6346'%20height='44.1346'%20fill='%23E0E0E0'/%3e%3crect%20x='11.4327'%20y='0.432692'%20width='21.6346'%20height='44.1346'%20stroke='%234D4D4D'%20stroke-width='0.865385'/%3e%3c/svg%3e\"},\"svg\":\"data:image/svg+xml,%3csvg%20width='45'%20height='45'%20viewBox='0%200%2045%2045'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20x='11.4327'%20y='0.432692'%20width='21.6346'%20height='44.1346'%20fill='%23E0E0E0'/%3e%3crect%20x='11.4327'%20y='0.432692'%20width='21.6346'%20height='44.1346'%20stroke='%234D4D4D'%20stroke-width='0.865385'/%3e%3c/svg%3e\",\"id\":\"box-node-48501150\",\"measured\":{\"width\":300,\"height\":612},\"selected\":false,\"dragging\":false},{\"name\":\"Compressor Node\",\"nodeType\":\"compressor-node\",\"type\":\"compressorNode\",\"position\":{\"x\":-4558.5422079506425,\"y\":-459.8436718982687},\"data\":{\"nodeColor\":\"#d3d3d3\",\"strokeColor\":\"#000000\",\"subSystem\":null,\"svgPath\":\"data:image/svg+xml,%3csvg%20width='47'%20height='45'%20viewBox='0%200%2047%2045'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M23.5371%2016.5084L23.5371%2027.4846L0.926554%2033.9135L0.926556%208.82508L23.5371%2016.5084Z'%20fill='url(%23paint0_linear_5425_292293)'%20stroke='%234D4D4D'%20stroke-width='0.309734'/%3e%3cpath%20d='M23.4004%2027.5656V16.5894L46.0109%2010.1605V35.2489L23.4004%2027.5656Z'%20fill='url(%23paint1_linear_5425_292293)'%20stroke='%234D4D4D'%20stroke-width='0.309734'/%3e%3cdefs%3e%3clinearGradient%20id='paint0_linear_5425_292293'%20x1='12.2318'%20y1='33.9135'%20x2='12.2318'%20y2='8.82508'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%23ADADAD'/%3e%3cstop%20offset='0.509615'%20stop-color='%23E3E3E3'/%3e%3cstop%20offset='1'%20stop-color='%23ADADAD'/%3e%3c/linearGradient%3e%3clinearGradient%20id='paint1_linear_5425_292293'%20x1='34.7057'%20y1='10.1605'%20x2='34.7057'%20y2='35.2489'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%23ADADAD'/%3e%3cstop%20offset='0.509615'%20stop-color='%23E3E3E3'/%3e%3cstop%20offset='1'%20stop-color='%23ADADAD'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e\",\"gradientStart\":\"#f2f2f2\",\"gradientEnd\":\"#ADADAD\"},\"svg\":\"data:image/svg+xml,%3csvg%20width='47'%20height='45'%20viewBox='0%200%2047%2045'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M23.5371%2016.5084L23.5371%2027.4846L0.926554%2033.9135L0.926556%208.82508L23.5371%2016.5084Z'%20fill='url(%23paint0_linear_5425_292293)'%20stroke='%234D4D4D'%20stroke-width='0.309734'/%3e%3cpath%20d='M23.4004%2027.5656V16.5894L46.0109%2010.1605V35.2489L23.4004%2027.5656Z'%20fill='url(%23paint1_linear_5425_292293)'%20stroke='%234D4D4D'%20stroke-width='0.309734'/%3e%3cdefs%3e%3clinearGradient%20id='paint0_linear_5425_292293'%20x1='12.2318'%20y1='33.9135'%20x2='12.2318'%20y2='8.82508'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%23ADADAD'/%3e%3cstop%20offset='0.509615'%20stop-color='%23E3E3E3'/%3e%3cstop%20offset='1'%20stop-color='%23ADADAD'/%3e%3c/linearGradient%3e%3clinearGradient%20id='paint1_linear_5425_292293'%20x1='34.7057'%20y1='10.1605'%20x2='34.7057'%20y2='35.2489'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%23ADADAD'/%3e%3cstop%20offset='0.509615'%20stop-color='%23E3E3E3'/%3e%3cstop%20offset='1'%20stop-color='%23ADADAD'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e\",\"id\":\"compressor-node-49212023\",\"measured\":{\"width\":300,\"height\":176},\"selected\":false,\"style\":{\"width\":1457,\"height\":1022},\"dragging\":false},{\"name\":\"Box Node\",\"nodeType\":\"box-node\",\"type\":\"boxNode\",\"position\":{\"x\":-1480.0306165585914,\"y\":-235.84749267384709},\"data\":{\"nodeColor\":\"#d3d3d3\",\"strokeColor\":\"#000000\",\"subSystem\":null,\"svgPath\":\"data:image/svg+xml,%3csvg%20width='45'%20height='45'%20viewBox='0%200%2045%2045'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20x='11.4327'%20y='0.432692'%20width='21.6346'%20height='44.1346'%20fill='%23E0E0E0'/%3e%3crect%20x='11.4327'%20y='0.432692'%20width='21.6346'%20height='44.1346'%20stroke='%234D4D4D'%20stroke-width='0.865385'/%3e%3c/svg%3e\"},\"svg\":\"data:image/svg+xml,%3csvg%20width='45'%20height='45'%20viewBox='0%200%2045%2045'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20x='11.4327'%20y='0.432692'%20width='21.6346'%20height='44.1346'%20fill='%23E0E0E0'/%3e%3crect%20x='11.4327'%20y='0.432692'%20width='21.6346'%20height='44.1346'%20stroke='%234D4D4D'%20stroke-width='0.865385'/%3e%3c/svg%3e\",\"id\":\"box-node-11214259\",\"measured\":{\"width\":300,\"height\":612},\"selected\":false,\"dragging\":false},{\"name\":\"Bearing Node\",\"nodeType\":\"bearing-node\",\"type\":\"bearingNode\",\"position\":{\"x\":8719.061267433422,\"y\":-125.34337538249613},\"data\":{\"nodeColor\":\"#d3d3d3\",\"strokeColor\":\"#000000\",\"subSystem\":null,\"svgPath\":\"data:image/svg+xml,%3csvg%20width='45'%20height='46'%20viewBox='0%200%2045%2046'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20clip-path='url(%23clip0_5425_292188)'%3e%3crect%20x='13.3594'%20y='0.5'%20width='18.2812'%20height='45'%20fill='%23DCDCDC'/%3e%3cline%20opacity='0.5'%20x1='14.1973'%20y1='1.72857'%20x2='31.0723'%20y2='45.3223'%20stroke='%234D4D4D'%20stroke-width='0.984375'/%3e%3cline%20opacity='0.5'%20x1='13.2793'%20y1='45.3223'%20x2='30.1543'%20y2='1.72858'%20stroke='%234D4D4D'%20stroke-width='0.984375'/%3e%3c/g%3e%3crect%20x='13.7109'%20y='0.851562'%20width='17.5781'%20height='44.2969'%20stroke='%234D4D4D'%20stroke-width='0.703125'/%3e%3cdefs%3e%3cclipPath%20id='clip0_5425_292188'%3e%3crect%20x='13.3594'%20y='0.5'%20width='18.2812'%20height='45'%20fill='white'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e\"},\"svg\":\"data:image/svg+xml,%3csvg%20width='45'%20height='46'%20viewBox='0%200%2045%2046'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20clip-path='url(%23clip0_5425_292188)'%3e%3crect%20x='13.3594'%20y='0.5'%20width='18.2812'%20height='45'%20fill='%23DCDCDC'/%3e%3cline%20opacity='0.5'%20x1='14.1973'%20y1='1.72857'%20x2='31.0723'%20y2='45.3223'%20stroke='%234D4D4D'%20stroke-width='0.984375'/%3e%3cline%20opacity='0.5'%20x1='13.2793'%20y1='45.3223'%20x2='30.1543'%20y2='1.72858'%20stroke='%234D4D4D'%20stroke-width='0.984375'/%3e%3c/g%3e%3crect%20x='13.7109'%20y='0.851562'%20width='17.5781'%20height='44.2969'%20stroke='%234D4D4D'%20stroke-width='0.703125'/%3e%3cdefs%3e%3cclipPath%20id='clip0_5425_292188'%3e%3crect%20x='13.3594'%20y='0.5'%20width='18.2812'%20height='45'%20fill='white'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e\",\"id\":\"bearing-node-23261650\",\"measured\":{\"width\":300,\"height\":735},\"selected\":false,\"dragging\":false,\"style\":{\"width\":225,\"height\":360}},{\"name\":\"Coupling Node\",\"nodeType\":\"coupling-node\",\"type\":\"couplingNode\",\"position\":{\"x\":796.9943052804297,\"y\":-70.51788955246607},\"data\":{\"isActive\":false,\"linkedTag\":null,\"subSystem\":null,\"nodeColor\":\"#a9a6a6\",\"strokeColor\":\"#000000\",\"svgPath\":\"data:image/svg+xml,%3csvg%20width='46'%20height='45'%20viewBox='0%200%2046%2045'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20x='4.03854'%20y='16.3847'%20width='37.3846'%20height='12'%20fill='%239A9797'%20stroke='%234D4D4D'%20stroke-width='0.692308'/%3e%3crect%20x='40.7309'%20y='12.3463'%20width='4.15385'%20height='20.0769'%20fill='%239A9797'%20stroke='%234D4D4D'%20stroke-width='0.692308'/%3e%3crect%20x='0.346154'%20y='12.3463'%20width='4.15385'%20height='20.0769'%20fill='%239A9797'%20stroke='%234D4D4D'%20stroke-width='0.692308'/%3e%3c/svg%3e\"},\"svg\":\"data:image/svg+xml,%3csvg%20width='46'%20height='45'%20viewBox='0%200%2046%2045'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20x='4.03854'%20y='16.3847'%20width='37.3846'%20height='12'%20fill='%239A9797'%20stroke='%234D4D4D'%20stroke-width='0.692308'/%3e%3crect%20x='40.7309'%20y='12.3463'%20width='4.15385'%20height='20.0769'%20fill='%239A9797'%20stroke='%234D4D4D'%20stroke-width='0.692308'/%3e%3crect%20x='0.346154'%20y='12.3463'%20width='4.15385'%20height='20.0769'%20fill='%239A9797'%20stroke='%234D4D4D'%20stroke-width='0.692308'/%3e%3c/svg%3e\",\"id\":\"coupling-node-60444590\",\"measured\":{\"width\":300,\"height\":135},\"selected\":false,\"style\":{\"width\":584,\"height\":240},\"dragging\":false},{\"name\":\"Bearing Node\",\"nodeType\":\"bearing-node\",\"type\":\"bearingNode\",\"position\":{\"x\":-1701.0042440065238,\"y\":-90.52611179952532},\"data\":{\"nodeColor\":\"#d3d3d3\",\"strokeColor\":\"#000000\",\"subSystem\":null,\"svgPath\":\"data:image/svg+xml,%3csvg%20width='45'%20height='46'%20viewBox='0%200%2045%2046'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20clip-path='url(%23clip0_5425_292188)'%3e%3crect%20x='13.3594'%20y='0.5'%20width='18.2812'%20height='45'%20fill='%23DCDCDC'/%3e%3cline%20opacity='0.5'%20x1='14.1973'%20y1='1.72857'%20x2='31.0723'%20y2='45.3223'%20stroke='%234D4D4D'%20stroke-width='0.984375'/%3e%3cline%20opacity='0.5'%20x1='13.2793'%20y1='45.3223'%20x2='30.1543'%20y2='1.72858'%20stroke='%234D4D4D'%20stroke-width='0.984375'/%3e%3c/g%3e%3crect%20x='13.7109'%20y='0.851562'%20width='17.5781'%20height='44.2969'%20stroke='%234D4D4D'%20stroke-width='0.703125'/%3e%3cdefs%3e%3cclipPath%20id='clip0_5425_292188'%3e%3crect%20x='13.3594'%20y='0.5'%20width='18.2812'%20height='45'%20fill='white'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e\"},\"svg\":\"data:image/svg+xml,%3csvg%20width='45'%20height='46'%20viewBox='0%200%2045%2046'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20clip-path='url(%23clip0_5425_292188)'%3e%3crect%20x='13.3594'%20y='0.5'%20width='18.2812'%20height='45'%20fill='%23DCDCDC'/%3e%3cline%20opacity='0.5'%20x1='14.1973'%20y1='1.72857'%20x2='31.0723'%20y2='45.3223'%20stroke='%234D4D4D'%20stroke-width='0.984375'/%3e%3cline%20opacity='0.5'%20x1='13.2793'%20y1='45.3223'%20x2='30.1543'%20y2='1.72858'%20stroke='%234D4D4D'%20stroke-width='0.984375'/%3e%3c/g%3e%3crect%20x='13.7109'%20y='0.851562'%20width='17.5781'%20height='44.2969'%20stroke='%234D4D4D'%20stroke-width='0.703125'/%3e%3cdefs%3e%3cclipPath%20id='clip0_5425_292188'%3e%3crect%20x='13.3594'%20y='0.5'%20width='18.2812'%20height='45'%20fill='white'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e\",\"id\":\"bearing-node-32711982\",\"measured\":{\"width\":300,\"height\":735},\"selected\":false,\"dragging\":false,\"style\":{\"width\":225,\"height\":360}},{\"name\":\"Turbine Node\",\"nodeType\":\"turbine-node\",\"type\":\"turbineNode\",\"position\":{\"x\":8144.006776068362,\"y\":-247.4459422124487},\"data\":{\"nodeColor\":\"#d3d3d3\",\"strokeColor\":\"#000000\",\"subSystem\":null,\"svgPath\":\"data:image/svg+xml,%3csvg%20width='45'%20height='47'%20viewBox='0%200%2045%2047'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M1.79297%2014.7809L1.79297%2034.4684L42.3485%2045.9996L42.3485%200.9996L1.79297%2014.7809Z'%20fill='url(%23paint0_linear_5438_291173)'%20stroke='%234D4D4D'%20stroke-width='0.555556'/%3e%3cdefs%3e%3clinearGradient%20id='paint0_linear_5438_291173'%20x1='22.0707'%20y1='45.9996'%20x2='22.0707'%20y2='0.999601'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%23ADADAD'/%3e%3cstop%20offset='0.509615'%20stop-color='%23E3E3E3'/%3e%3cstop%20offset='1'%20stop-color='%23ADADAD'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e\"},\"svg\":\"data:image/svg+xml,%3csvg%20width='45'%20height='47'%20viewBox='0%200%2045%2047'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M1.79297%2014.7809L1.79297%2034.4684L42.3485%2045.9996L42.3485%200.9996L1.79297%2014.7809Z'%20fill='url(%23paint0_linear_5438_291173)'%20stroke='%234D4D4D'%20stroke-width='0.555556'/%3e%3cdefs%3e%3clinearGradient%20id='paint0_linear_5438_291173'%20x1='22.0707'%20y1='45.9996'%20x2='22.0707'%20y2='0.999601'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%23ADADAD'/%3e%3cstop%20offset='0.509615'%20stop-color='%23E3E3E3'/%3e%3cstop%20offset='1'%20stop-color='%23ADADAD'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e\",\"id\":\"turbine-node-69749332\",\"measured\":{\"width\":300,\"height\":333},\"selected\":false,\"style\":{\"width\":585,\"height\":595},\"dragging\":false},{\"name\":\"Heat Exchanger Node\",\"nodeType\":\"heat-exchanger-node\",\"type\":\"heatExchangerNode\",\"position\":{\"x\":403.867840200754,\"y\":2300.0991875045493},\"data\":{\"nodeColor\":\"#d3d3d3\",\"strokeColor\":\"#000000\",\"subSystem\":null,\"svgPath\":\"data:image/svg+xml,%3csvg%20width='45'%20height='45'%20viewBox='0%200%2045%2045'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20x='11.6914'%20y='16.6924'%20width='21.125'%20height='1.92046'%20fill='%234D4D4D'/%3e%3crect%20x='11.6914'%20y='19.5731'%20width='21.125'%20height='1.92046'%20fill='%234D4D4D'/%3e%3crect%20x='11.6914'%20y='22.4536'%20width='21.125'%20height='1.92046'%20fill='%234D4D4D'/%3e%3crect%20x='11.6914'%20y='25.3344'%20width='21.125'%20height='1.92046'%20fill='%234D4D4D'/%3e%3cpath%20d='M34.0968%2016.6921C34.7693%2016.6921%2035.4353%2016.8246%2036.0566%2017.082C36.6779%2017.3393%2037.2425%2017.7166%2037.718%2018.1921C38.1936%2018.6677%2038.5708%2019.2322%2038.8282%2019.8535C39.0856%2020.4749%2039.218%2021.1408%2039.218%2021.8134C39.218%2022.4859%2039.0856%2023.1518%2038.8282%2023.7732C38.5708%2024.3945%2038.1936%2024.9591%2037.718%2025.4346C37.2425%2025.9101%2036.6779%2026.2874%2036.0566%2026.5447C35.4353%2026.8021%2034.7693%2026.9346%2034.0968%2026.9346L34.0968%2021.8134L34.0968%2016.6921Z'%20fill='%234D4D4D'/%3e%3cpath%20d='M10.411%2026.9348C9.73848%2026.9348%209.07254%2026.8024%208.4512%2026.545C7.82987%2026.2876%207.26531%2025.9104%206.78976%2025.4348C6.31421%2024.9593%205.93699%2024.3947%205.67962%2023.7734C5.42226%2023.1521%205.28979%2022.4861%205.28979%2021.8136C5.28979%2021.1411%205.42226%2020.4751%205.67962%2019.8538C5.93699%2019.2325%206.31421%2018.6679%206.78976%2018.1924C7.26531%2017.7168%207.82987%2017.3396%208.45121%2017.0822C9.07254%2016.8248%209.73848%2016.6924%2010.411%2016.6924L10.411%2021.8136L10.411%2026.9348Z'%20fill='%234D4D4D'/%3e%3c/svg%3e\",\"gradientStart\":\"#9d9915\",\"gradientEnd\":\"#a6a11c\"},\"svg\":\"data:image/svg+xml,%3csvg%20width='45'%20height='45'%20viewBox='0%200%2045%2045'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20x='11.6914'%20y='16.6924'%20width='21.125'%20height='1.92046'%20fill='%234D4D4D'/%3e%3crect%20x='11.6914'%20y='19.5731'%20width='21.125'%20height='1.92046'%20fill='%234D4D4D'/%3e%3crect%20x='11.6914'%20y='22.4536'%20width='21.125'%20height='1.92046'%20fill='%234D4D4D'/%3e%3crect%20x='11.6914'%20y='25.3344'%20width='21.125'%20height='1.92046'%20fill='%234D4D4D'/%3e%3cpath%20d='M34.0968%2016.6921C34.7693%2016.6921%2035.4353%2016.8246%2036.0566%2017.082C36.6779%2017.3393%2037.2425%2017.7166%2037.718%2018.1921C38.1936%2018.6677%2038.5708%2019.2322%2038.8282%2019.8535C39.0856%2020.4749%2039.218%2021.1408%2039.218%2021.8134C39.218%2022.4859%2039.0856%2023.1518%2038.8282%2023.7732C38.5708%2024.3945%2038.1936%2024.9591%2037.718%2025.4346C37.2425%2025.9101%2036.6779%2026.2874%2036.0566%2026.5447C35.4353%2026.8021%2034.7693%2026.9346%2034.0968%2026.9346L34.0968%2021.8134L34.0968%2016.6921Z'%20fill='%234D4D4D'/%3e%3cpath%20d='M10.411%2026.9348C9.73848%2026.9348%209.07254%2026.8024%208.4512%2026.545C7.82987%2026.2876%207.26531%2025.9104%206.78976%2025.4348C6.31421%2024.9593%205.93699%2024.3947%205.67962%2023.7734C5.42226%2023.1521%205.28979%2022.4861%205.28979%2021.8136C5.28979%2021.1411%205.42226%2020.4751%205.67962%2019.8538C5.93699%2019.2325%206.31421%2018.6679%206.78976%2018.1924C7.26531%2017.7168%207.82987%2017.3396%208.45121%2017.0822C9.07254%2016.8248%209.73848%2016.6924%2010.411%2016.6924L10.411%2021.8136L10.411%2026.9348Z'%20fill='%234D4D4D'/%3e%3c/svg%3e\",\"id\":\"heat-exchanger-node-22387753\",\"measured\":{\"width\":300,\"height\":93},\"selected\":false,\"style\":{\"width\":1239,\"height\":485},\"dragging\":false},{\"name\":\"KOD Node\",\"nodeType\":\"kod-node\",\"type\":\"kodNode\",\"position\":{\"x\":6214.984419719021,\"y\":1986.6884036655615},\"data\":{\"nodeColor\":\"#d3d3d3\",\"strokeColor\":\"#000000\",\"subSystem\":null,\"svgPath\":\"data:image/svg+xml,%3csvg%20width='45'%20height='45'%20viewBox='0%200%2045%2045'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M30.1035%2040.7344H15.709L22.9062%2029.5811L30.1035%2040.7344Z'%20fill='url(%23paint0_linear_5425_291103)'%20stroke='%234D4D4D'%20stroke-width='0.5625'/%3e%3crect%20x='16.1562'%20y='0.28125'%20width='13.5'%20height='35.0625'%20rx='6.75'%20fill='url(%23paint1_linear_5425_291103)'%20stroke='%234D4D4D'%20stroke-width='0.5625'/%3e%3cdefs%3e%3clinearGradient%20id='paint0_linear_5425_291103'%20x1='22.9062'%20y1='29.0625'%20x2='22.9062'%20y2='45'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%23ADADAD'/%3e%3cstop%20offset='0.509615'%20stop-color='%23E3E3E3'/%3e%3cstop%20offset='1'%20stop-color='%23ADADAD'/%3e%3c/linearGradient%3e%3clinearGradient%20id='paint1_linear_5425_291103'%20x1='22.9062'%20y1='0'%20x2='22.9063'%20y2='35.625'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%23ADADAD'/%3e%3cstop%20offset='0.509615'%20stop-color='%23E3E3E3'/%3e%3cstop%20offset='1'%20stop-color='%23ADADAD'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e\"},\"svg\":\"data:image/svg+xml,%3csvg%20width='45'%20height='45'%20viewBox='0%200%2045%2045'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M30.1035%2040.7344H15.709L22.9062%2029.5811L30.1035%2040.7344Z'%20fill='url(%23paint0_linear_5425_291103)'%20stroke='%234D4D4D'%20stroke-width='0.5625'/%3e%3crect%20x='16.1562'%20y='0.28125'%20width='13.5'%20height='35.0625'%20rx='6.75'%20fill='url(%23paint1_linear_5425_291103)'%20stroke='%234D4D4D'%20stroke-width='0.5625'/%3e%3cdefs%3e%3clinearGradient%20id='paint0_linear_5425_291103'%20x1='22.9062'%20y1='29.0625'%20x2='22.9062'%20y2='45'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%23ADADAD'/%3e%3cstop%20offset='0.509615'%20stop-color='%23E3E3E3'/%3e%3cstop%20offset='1'%20stop-color='%23ADADAD'/%3e%3c/linearGradient%3e%3clinearGradient%20id='paint1_linear_5425_291103'%20x1='22.9062'%20y1='0'%20x2='22.9063'%20y2='35.625'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%23ADADAD'/%3e%3cstop%20offset='0.509615'%20stop-color='%23E3E3E3'/%3e%3cstop%20offset='1'%20stop-color='%23ADADAD'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e\",\"id\":\"kod-node-15878354\",\"measured\":{\"width\":300,\"height\":843},\"selected\":false,\"style\":{\"width\":440,\"height\":1003},\"dragging\":false},{\"name\":\"Heat Exchanger Node\",\"nodeType\":\"heat-exchanger-node\",\"type\":\"heatExchangerNode\",\"position\":{\"x\":323.8678402007538,\"y\":-3519.9008124954507},\"data\":{\"nodeColor\":\"#d3d3d3\",\"strokeColor\":\"#000000\",\"subSystem\":null,\"svgPath\":\"data:image/svg+xml,%3csvg%20width='45'%20height='45'%20viewBox='0%200%2045%2045'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20x='11.6914'%20y='16.6924'%20width='21.125'%20height='1.92046'%20fill='%234D4D4D'/%3e%3crect%20x='11.6914'%20y='19.5731'%20width='21.125'%20height='1.92046'%20fill='%234D4D4D'/%3e%3crect%20x='11.6914'%20y='22.4536'%20width='21.125'%20height='1.92046'%20fill='%234D4D4D'/%3e%3crect%20x='11.6914'%20y='25.3344'%20width='21.125'%20height='1.92046'%20fill='%234D4D4D'/%3e%3cpath%20d='M34.0968%2016.6921C34.7693%2016.6921%2035.4353%2016.8246%2036.0566%2017.082C36.6779%2017.3393%2037.2425%2017.7166%2037.718%2018.1921C38.1936%2018.6677%2038.5708%2019.2322%2038.8282%2019.8535C39.0856%2020.4749%2039.218%2021.1408%2039.218%2021.8134C39.218%2022.4859%2039.0856%2023.1518%2038.8282%2023.7732C38.5708%2024.3945%2038.1936%2024.9591%2037.718%2025.4346C37.2425%2025.9101%2036.6779%2026.2874%2036.0566%2026.5447C35.4353%2026.8021%2034.7693%2026.9346%2034.0968%2026.9346L34.0968%2021.8134L34.0968%2016.6921Z'%20fill='%234D4D4D'/%3e%3cpath%20d='M10.411%2026.9348C9.73848%2026.9348%209.07254%2026.8024%208.4512%2026.545C7.82987%2026.2876%207.26531%2025.9104%206.78976%2025.4348C6.31421%2024.9593%205.93699%2024.3947%205.67962%2023.7734C5.42226%2023.1521%205.28979%2022.4861%205.28979%2021.8136C5.28979%2021.1411%205.42226%2020.4751%205.67962%2019.8538C5.93699%2019.2325%206.31421%2018.6679%206.78976%2018.1924C7.26531%2017.7168%207.82987%2017.3396%208.45121%2017.0822C9.07254%2016.8248%209.73848%2016.6924%2010.411%2016.6924L10.411%2021.8136L10.411%2026.9348Z'%20fill='%234D4D4D'/%3e%3c/svg%3e\"},\"svg\":\"data:image/svg+xml,%3csvg%20width='45'%20height='45'%20viewBox='0%200%2045%2045'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20x='11.6914'%20y='16.6924'%20width='21.125'%20height='1.92046'%20fill='%234D4D4D'/%3e%3crect%20x='11.6914'%20y='19.5731'%20width='21.125'%20height='1.92046'%20fill='%234D4D4D'/%3e%3crect%20x='11.6914'%20y='22.4536'%20width='21.125'%20height='1.92046'%20fill='%234D4D4D'/%3e%3crect%20x='11.6914'%20y='25.3344'%20width='21.125'%20height='1.92046'%20fill='%234D4D4D'/%3e%3cpath%20d='M34.0968%2016.6921C34.7693%2016.6921%2035.4353%2016.8246%2036.0566%2017.082C36.6779%2017.3393%2037.2425%2017.7166%2037.718%2018.1921C38.1936%2018.6677%2038.5708%2019.2322%2038.8282%2019.8535C39.0856%2020.4749%2039.218%2021.1408%2039.218%2021.8134C39.218%2022.4859%2039.0856%2023.1518%2038.8282%2023.7732C38.5708%2024.3945%2038.1936%2024.9591%2037.718%2025.4346C37.2425%2025.9101%2036.6779%2026.2874%2036.0566%2026.5447C35.4353%2026.8021%2034.7693%2026.9346%2034.0968%2026.9346L34.0968%2021.8134L34.0968%2016.6921Z'%20fill='%234D4D4D'/%3e%3cpath%20d='M10.411%2026.9348C9.73848%2026.9348%209.07254%2026.8024%208.4512%2026.545C7.82987%2026.2876%207.26531%2025.9104%206.78976%2025.4348C6.31421%2024.9593%205.93699%2024.3947%205.67962%2023.7734C5.42226%2023.1521%205.28979%2022.4861%205.28979%2021.8136C5.28979%2021.1411%205.42226%2020.4751%205.67962%2019.8538C5.93699%2019.2325%206.31421%2018.6679%206.78976%2018.1924C7.26531%2017.7168%207.82987%2017.3396%208.45121%2017.0822C9.07254%2016.8248%209.73848%2016.6924%2010.411%2016.6924L10.411%2021.8136L10.411%2026.9348Z'%20fill='%234D4D4D'/%3e%3c/svg%3e\",\"id\":\"heat-exchanger-node-40557925\",\"measured\":{\"width\":300,\"height\":93},\"selected\":false,\"style\":{\"width\":1239,\"height\":485},\"dragging\":false},{\"name\":\"KOD Node\",\"nodeType\":\"kod-node\",\"type\":\"kodNode\",\"position\":{\"x\":2774.9844197190223,\"y\":-5333.311596334438},\"data\":{\"nodeColor\":\"#d3d3d3\",\"strokeColor\":\"#000000\",\"subSystem\":null,\"svgPath\":\"data:image/svg+xml,%3csvg%20width='45'%20height='45'%20viewBox='0%200%2045%2045'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M30.1035%2040.7344H15.709L22.9062%2029.5811L30.1035%2040.7344Z'%20fill='url(%23paint0_linear_5425_291103)'%20stroke='%234D4D4D'%20stroke-width='0.5625'/%3e%3crect%20x='16.1562'%20y='0.28125'%20width='13.5'%20height='35.0625'%20rx='6.75'%20fill='url(%23paint1_linear_5425_291103)'%20stroke='%234D4D4D'%20stroke-width='0.5625'/%3e%3cdefs%3e%3clinearGradient%20id='paint0_linear_5425_291103'%20x1='22.9062'%20y1='29.0625'%20x2='22.9062'%20y2='45'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%23ADADAD'/%3e%3cstop%20offset='0.509615'%20stop-color='%23E3E3E3'/%3e%3cstop%20offset='1'%20stop-color='%23ADADAD'/%3e%3c/linearGradient%3e%3clinearGradient%20id='paint1_linear_5425_291103'%20x1='22.9062'%20y1='0'%20x2='22.9063'%20y2='35.625'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%23ADADAD'/%3e%3cstop%20offset='0.509615'%20stop-color='%23E3E3E3'/%3e%3cstop%20offset='1'%20stop-color='%23ADADAD'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e\"},\"svg\":\"data:image/svg+xml,%3csvg%20width='45'%20height='45'%20viewBox='0%200%2045%2045'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M30.1035%2040.7344H15.709L22.9062%2029.5811L30.1035%2040.7344Z'%20fill='url(%23paint0_linear_5425_291103)'%20stroke='%234D4D4D'%20stroke-width='0.5625'/%3e%3crect%20x='16.1562'%20y='0.28125'%20width='13.5'%20height='35.0625'%20rx='6.75'%20fill='url(%23paint1_linear_5425_291103)'%20stroke='%234D4D4D'%20stroke-width='0.5625'/%3e%3cdefs%3e%3clinearGradient%20id='paint0_linear_5425_291103'%20x1='22.9062'%20y1='29.0625'%20x2='22.9062'%20y2='45'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%23ADADAD'/%3e%3cstop%20offset='0.509615'%20stop-color='%23E3E3E3'/%3e%3cstop%20offset='1'%20stop-color='%23ADADAD'/%3e%3c/linearGradient%3e%3clinearGradient%20id='paint1_linear_5425_291103'%20x1='22.9062'%20y1='0'%20x2='22.9063'%20y2='35.625'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%23ADADAD'/%3e%3cstop%20offset='0.509615'%20stop-color='%23E3E3E3'/%3e%3cstop%20offset='1'%20stop-color='%23ADADAD'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e\",\"id\":\"kod-node-46326670\",\"measured\":{\"width\":300,\"height\":843},\"selected\":false,\"style\":{\"width\":440,\"height\":1003},\"dragging\":false},{\"name\":\"ESV Node\",\"nodeType\":\"esv-node\",\"type\":\"esvNode\",\"position\":{\"x\":-1997.6445674520355,\"y\":-3050.85952516137},\"data\":{\"nodeColor\":\"#d3d3d3\",\"strokeColor\":\"#000000\",\"subSystem\":null,\"svgPath\":\"data:image/svg+xml,%3csvg%20width='45'%20height='46'%20viewBox='0%200%2045%2046'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cmask%20id='path-1-inside-1_5425_292411'%20fill='white'%3e%3cpath%20d='M11.7783%200.537598H32.7834V10.2323H11.7783V0.537598Z'/%3e%3c/mask%3e%3cpath%20d='M11.7783%200.537598V-0.27029H10.9704V0.537598H11.7783ZM32.7834%200.537598H33.5913V-0.27029H32.7834V0.537598ZM11.7783%200.537598V1.34549H32.7834V0.537598V-0.27029H11.7783V0.537598ZM32.7834%200.537598H31.9755V10.2323H32.7834H33.5913V0.537598H32.7834ZM11.7783%2010.2323H12.5862V0.537598H11.7783H10.9704V10.2323H11.7783Z'%20fill='%234D4D4D'%20mask='url(%23path-1-inside-1_5425_292411)'/%3e%3crect%20x='12.1823'%20y='10.6362'%20width='9.69466'%20height='8.88677'%20stroke='%234D4D4D'%20stroke-width='0.807888'/%3e%3cmask%20id='path-4-inside-2_5425_292411'%20fill='white'%3e%3cpath%20d='M22.2812%2010.2323H32.7838V19.927H22.2812V10.2323Z'/%3e%3c/mask%3e%3cpath%20d='M32.7838%2010.2323H33.5917V9.42441H32.7838V10.2323ZM32.7838%2019.927V20.7348H33.5917V19.927H32.7838ZM22.2812%2010.2323V11.0402H32.7838V10.2323V9.42441H22.2812V10.2323ZM32.7838%2010.2323H31.9759V19.927H32.7838H33.5917V10.2323H32.7838ZM32.7838%2019.927V19.1191H22.2812V19.927V20.7348H32.7838V19.927Z'%20fill='%234D4D4D'%20mask='url(%23path-4-inside-2_5425_292411)'/%3e%3cpath%20d='M33.0078%2032.88L33.0078%2043.8185L22.9414%2038.3497L33.0078%2032.88Z'%20stroke='%234D4D4D'%20stroke-width='0.898613'/%3e%3cpath%20d='M10.9922%2043.8186L10.9922%2032.8801L21.0586%2038.3489L10.9922%2043.8186Z'%20stroke='%234D4D4D'%20stroke-width='0.898613'/%3e%3cpath%20d='M22%2038.3489L22%2019.4781'%20stroke='%234D4D4D'%20stroke-width='0.898613'/%3e%3c/svg%3e\"},\"svg\":\"data:image/svg+xml,%3csvg%20width='45'%20height='46'%20viewBox='0%200%2045%2046'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cmask%20id='path-1-inside-1_5425_292411'%20fill='white'%3e%3cpath%20d='M11.7783%200.537598H32.7834V10.2323H11.7783V0.537598Z'/%3e%3c/mask%3e%3cpath%20d='M11.7783%200.537598V-0.27029H10.9704V0.537598H11.7783ZM32.7834%200.537598H33.5913V-0.27029H32.7834V0.537598ZM11.7783%200.537598V1.34549H32.7834V0.537598V-0.27029H11.7783V0.537598ZM32.7834%200.537598H31.9755V10.2323H32.7834H33.5913V0.537598H32.7834ZM11.7783%2010.2323H12.5862V0.537598H11.7783H10.9704V10.2323H11.7783Z'%20fill='%234D4D4D'%20mask='url(%23path-1-inside-1_5425_292411)'/%3e%3crect%20x='12.1823'%20y='10.6362'%20width='9.69466'%20height='8.88677'%20stroke='%234D4D4D'%20stroke-width='0.807888'/%3e%3cmask%20id='path-4-inside-2_5425_292411'%20fill='white'%3e%3cpath%20d='M22.2812%2010.2323H32.7838V19.927H22.2812V10.2323Z'/%3e%3c/mask%3e%3cpath%20d='M32.7838%2010.2323H33.5917V9.42441H32.7838V10.2323ZM32.7838%2019.927V20.7348H33.5917V19.927H32.7838ZM22.2812%2010.2323V11.0402H32.7838V10.2323V9.42441H22.2812V10.2323ZM32.7838%2010.2323H31.9759V19.927H32.7838H33.5917V10.2323H32.7838ZM32.7838%2019.927V19.1191H22.2812V19.927V20.7348H32.7838V19.927Z'%20fill='%234D4D4D'%20mask='url(%23path-4-inside-2_5425_292411)'/%3e%3cpath%20d='M33.0078%2032.88L33.0078%2043.8185L22.9414%2038.3497L33.0078%2032.88Z'%20stroke='%234D4D4D'%20stroke-width='0.898613'/%3e%3cpath%20d='M10.9922%2043.8186L10.9922%2032.8801L21.0586%2038.3489L10.9922%2043.8186Z'%20stroke='%234D4D4D'%20stroke-width='0.898613'/%3e%3cpath%20d='M22%2038.3489L22%2019.4781'%20stroke='%234D4D4D'%20stroke-width='0.898613'/%3e%3c/svg%3e\",\"id\":\"esv-node-64159472\",\"measured\":{\"width\":300,\"height\":585},\"selected\":false,\"style\":{\"width\":780,\"height\":1132},\"dragging\":false},{\"name\":\"ESV Node\",\"nodeType\":\"esv-node\",\"type\":\"esvNode\",\"position\":{\"x\":-3677.6445674520355,\"y\":-3050.85952516137},\"data\":{\"nodeColor\":\"#d3d3d3\",\"strokeColor\":\"#000000\",\"subSystem\":null,\"svgPath\":\"data:image/svg+xml,%3csvg%20width='45'%20height='46'%20viewBox='0%200%2045%2046'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cmask%20id='path-1-inside-1_5425_292411'%20fill='white'%3e%3cpath%20d='M11.7783%200.537598H32.7834V10.2323H11.7783V0.537598Z'/%3e%3c/mask%3e%3cpath%20d='M11.7783%200.537598V-0.27029H10.9704V0.537598H11.7783ZM32.7834%200.537598H33.5913V-0.27029H32.7834V0.537598ZM11.7783%200.537598V1.34549H32.7834V0.537598V-0.27029H11.7783V0.537598ZM32.7834%200.537598H31.9755V10.2323H32.7834H33.5913V0.537598H32.7834ZM11.7783%2010.2323H12.5862V0.537598H11.7783H10.9704V10.2323H11.7783Z'%20fill='%234D4D4D'%20mask='url(%23path-1-inside-1_5425_292411)'/%3e%3crect%20x='12.1823'%20y='10.6362'%20width='9.69466'%20height='8.88677'%20stroke='%234D4D4D'%20stroke-width='0.807888'/%3e%3cmask%20id='path-4-inside-2_5425_292411'%20fill='white'%3e%3cpath%20d='M22.2812%2010.2323H32.7838V19.927H22.2812V10.2323Z'/%3e%3c/mask%3e%3cpath%20d='M32.7838%2010.2323H33.5917V9.42441H32.7838V10.2323ZM32.7838%2019.927V20.7348H33.5917V19.927H32.7838ZM22.2812%2010.2323V11.0402H32.7838V10.2323V9.42441H22.2812V10.2323ZM32.7838%2010.2323H31.9759V19.927H32.7838H33.5917V10.2323H32.7838ZM32.7838%2019.927V19.1191H22.2812V19.927V20.7348H32.7838V19.927Z'%20fill='%234D4D4D'%20mask='url(%23path-4-inside-2_5425_292411)'/%3e%3cpath%20d='M33.0078%2032.88L33.0078%2043.8185L22.9414%2038.3497L33.0078%2032.88Z'%20stroke='%234D4D4D'%20stroke-width='0.898613'/%3e%3cpath%20d='M10.9922%2043.8186L10.9922%2032.8801L21.0586%2038.3489L10.9922%2043.8186Z'%20stroke='%234D4D4D'%20stroke-width='0.898613'/%3e%3cpath%20d='M22%2038.3489L22%2019.4781'%20stroke='%234D4D4D'%20stroke-width='0.898613'/%3e%3c/svg%3e\"},\"svg\":\"data:image/svg+xml,%3csvg%20width='45'%20height='46'%20viewBox='0%200%2045%2046'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cmask%20id='path-1-inside-1_5425_292411'%20fill='white'%3e%3cpath%20d='M11.7783%200.537598H32.7834V10.2323H11.7783V0.537598Z'/%3e%3c/mask%3e%3cpath%20d='M11.7783%200.537598V-0.27029H10.9704V0.537598H11.7783ZM32.7834%200.537598H33.5913V-0.27029H32.7834V0.537598ZM11.7783%200.537598V1.34549H32.7834V0.537598V-0.27029H11.7783V0.537598ZM32.7834%200.537598H31.9755V10.2323H32.7834H33.5913V0.537598H32.7834ZM11.7783%2010.2323H12.5862V0.537598H11.7783H10.9704V10.2323H11.7783Z'%20fill='%234D4D4D'%20mask='url(%23path-1-inside-1_5425_292411)'/%3e%3crect%20x='12.1823'%20y='10.6362'%20width='9.69466'%20height='8.88677'%20stroke='%234D4D4D'%20stroke-width='0.807888'/%3e%3cmask%20id='path-4-inside-2_5425_292411'%20fill='white'%3e%3cpath%20d='M22.2812%2010.2323H32.7838V19.927H22.2812V10.2323Z'/%3e%3c/mask%3e%3cpath%20d='M32.7838%2010.2323H33.5917V9.42441H32.7838V10.2323ZM32.7838%2019.927V20.7348H33.5917V19.927H32.7838ZM22.2812%2010.2323V11.0402H32.7838V10.2323V9.42441H22.2812V10.2323ZM32.7838%2010.2323H31.9759V19.927H32.7838H33.5917V10.2323H32.7838ZM32.7838%2019.927V19.1191H22.2812V19.927V20.7348H32.7838V19.927Z'%20fill='%234D4D4D'%20mask='url(%23path-4-inside-2_5425_292411)'/%3e%3cpath%20d='M33.0078%2032.88L33.0078%2043.8185L22.9414%2038.3497L33.0078%2032.88Z'%20stroke='%234D4D4D'%20stroke-width='0.898613'/%3e%3cpath%20d='M10.9922%2043.8186L10.9922%2032.8801L21.0586%2038.3489L10.9922%2043.8186Z'%20stroke='%234D4D4D'%20stroke-width='0.898613'/%3e%3cpath%20d='M22%2038.3489L22%2019.4781'%20stroke='%234D4D4D'%20stroke-width='0.898613'/%3e%3c/svg%3e\",\"id\":\"esv-node-91323687\",\"measured\":{\"width\":300,\"height\":585},\"selected\":false,\"style\":{\"width\":780,\"height\":1132},\"dragging\":false},{\"name\":\"Bearing Node\",\"nodeType\":\"bearing-node\",\"type\":\"bearingNode\",\"position\":{\"x\":1377.294209995441,\"y\":-136.4740459994067},\"data\":{\"nodeColor\":\"#d3d3d3\",\"strokeColor\":\"#000000\",\"subSystem\":null,\"svgPath\":\"data:image/svg+xml,%3csvg%20width='45'%20height='46'%20viewBox='0%200%2045%2046'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20clip-path='url(%23clip0_5425_292188)'%3e%3crect%20x='13.3594'%20y='0.5'%20width='18.2812'%20height='45'%20fill='%23DCDCDC'/%3e%3cline%20opacity='0.5'%20x1='14.1973'%20y1='1.72857'%20x2='31.0723'%20y2='45.3223'%20stroke='%234D4D4D'%20stroke-width='0.984375'/%3e%3cline%20opacity='0.5'%20x1='13.2793'%20y1='45.3223'%20x2='30.1543'%20y2='1.72858'%20stroke='%234D4D4D'%20stroke-width='0.984375'/%3e%3c/g%3e%3crect%20x='13.7109'%20y='0.851562'%20width='17.5781'%20height='44.2969'%20stroke='%234D4D4D'%20stroke-width='0.703125'/%3e%3cdefs%3e%3cclipPath%20id='clip0_5425_292188'%3e%3crect%20x='13.3594'%20y='0.5'%20width='18.2812'%20height='45'%20fill='white'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e\"},\"svg\":\"data:image/svg+xml,%3csvg%20width='45'%20height='46'%20viewBox='0%200%2045%2046'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20clip-path='url(%23clip0_5425_292188)'%3e%3crect%20x='13.3594'%20y='0.5'%20width='18.2812'%20height='45'%20fill='%23DCDCDC'/%3e%3cline%20opacity='0.5'%20x1='14.1973'%20y1='1.72857'%20x2='31.0723'%20y2='45.3223'%20stroke='%234D4D4D'%20stroke-width='0.984375'/%3e%3cline%20opacity='0.5'%20x1='13.2793'%20y1='45.3223'%20x2='30.1543'%20y2='1.72858'%20stroke='%234D4D4D'%20stroke-width='0.984375'/%3e%3c/g%3e%3crect%20x='13.7109'%20y='0.851562'%20width='17.5781'%20height='44.2969'%20stroke='%234D4D4D'%20stroke-width='0.703125'/%3e%3cdefs%3e%3cclipPath%20id='clip0_5425_292188'%3e%3crect%20x='13.3594'%20y='0.5'%20width='18.2812'%20height='45'%20fill='white'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e\",\"id\":\"bearing-node-98855154\",\"measured\":{\"width\":300,\"height\":735},\"selected\":false,\"dragging\":false,\"style\":{\"width\":225,\"height\":360}},{\"name\":\"Bearing Node\",\"nodeType\":\"bearing-node\",\"type\":\"bearingNode\",\"position\":{\"x\":-5369.078124999999,\"y\":-333.796875},\"data\":{\"nodeColor\":\"#d3d3d3\",\"strokeColor\":\"#000000\",\"subSystem\":null,\"svgPath\":\"data:image/svg+xml,%3csvg%20width='45'%20height='46'%20viewBox='0%200%2045%2046'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20clip-path='url(%23clip0_5425_292188)'%3e%3crect%20x='13.3594'%20y='0.5'%20width='18.2812'%20height='45'%20fill='%23DCDCDC'/%3e%3cline%20opacity='0.5'%20x1='14.1973'%20y1='1.72857'%20x2='31.0723'%20y2='45.3223'%20stroke='%234D4D4D'%20stroke-width='0.984375'/%3e%3cline%20opacity='0.5'%20x1='13.2793'%20y1='45.3223'%20x2='30.1543'%20y2='1.72858'%20stroke='%234D4D4D'%20stroke-width='0.984375'/%3e%3c/g%3e%3crect%20x='13.7109'%20y='0.851562'%20width='17.5781'%20height='44.2969'%20stroke='%234D4D4D'%20stroke-width='0.703125'/%3e%3cdefs%3e%3cclipPath%20id='clip0_5425_292188'%3e%3crect%20x='13.3594'%20y='0.5'%20width='18.2812'%20height='45'%20fill='white'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e\"},\"svg\":\"data:image/svg+xml,%3csvg%20width='45'%20height='46'%20viewBox='0%200%2045%2046'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20clip-path='url(%23clip0_5425_292188)'%3e%3crect%20x='13.3594'%20y='0.5'%20width='18.2812'%20height='45'%20fill='%23DCDCDC'/%3e%3cline%20opacity='0.5'%20x1='14.1973'%20y1='1.72857'%20x2='31.0723'%20y2='45.3223'%20stroke='%234D4D4D'%20stroke-width='0.984375'/%3e%3cline%20opacity='0.5'%20x1='13.2793'%20y1='45.3223'%20x2='30.1543'%20y2='1.72858'%20stroke='%234D4D4D'%20stroke-width='0.984375'/%3e%3c/g%3e%3crect%20x='13.7109'%20y='0.851562'%20width='17.5781'%20height='44.2969'%20stroke='%234D4D4D'%20stroke-width='0.703125'/%3e%3cdefs%3e%3cclipPath%20id='clip0_5425_292188'%3e%3crect%20x='13.3594'%20y='0.5'%20width='18.2812'%20height='45'%20fill='white'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e\",\"id\":\"bearing-node-52460837\",\"measured\":{\"width\":300,\"height\":735},\"selected\":false,\"dragging\":false},{\"name\":\"Bearing Node\",\"nodeType\":\"bearing-node\",\"type\":\"bearingNode\",\"position\":{\"x\":2392.5262585311402,\"y\":-351.2078862659224},\"data\":{\"nodeColor\":\"#d3d3d3\",\"strokeColor\":\"#000000\",\"subSystem\":null,\"svgPath\":\"data:image/svg+xml,%3csvg%20width='45'%20height='46'%20viewBox='0%200%2045%2046'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20clip-path='url(%23clip0_5425_292188)'%3e%3crect%20x='13.3594'%20y='0.5'%20width='18.2812'%20height='45'%20fill='%23DCDCDC'/%3e%3cline%20opacity='0.5'%20x1='14.1973'%20y1='1.72857'%20x2='31.0723'%20y2='45.3223'%20stroke='%234D4D4D'%20stroke-width='0.984375'/%3e%3cline%20opacity='0.5'%20x1='13.2793'%20y1='45.3223'%20x2='30.1543'%20y2='1.72858'%20stroke='%234D4D4D'%20stroke-width='0.984375'/%3e%3c/g%3e%3crect%20x='13.7109'%20y='0.851562'%20width='17.5781'%20height='44.2969'%20stroke='%234D4D4D'%20stroke-width='0.703125'/%3e%3cdefs%3e%3cclipPath%20id='clip0_5425_292188'%3e%3crect%20x='13.3594'%20y='0.5'%20width='18.2812'%20height='45'%20fill='white'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e\"},\"svg\":\"data:image/svg+xml,%3csvg%20width='45'%20height='46'%20viewBox='0%200%2045%2046'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20clip-path='url(%23clip0_5425_292188)'%3e%3crect%20x='13.3594'%20y='0.5'%20width='18.2812'%20height='45'%20fill='%23DCDCDC'/%3e%3cline%20opacity='0.5'%20x1='14.1973'%20y1='1.72857'%20x2='31.0723'%20y2='45.3223'%20stroke='%234D4D4D'%20stroke-width='0.984375'/%3e%3cline%20opacity='0.5'%20x1='13.2793'%20y1='45.3223'%20x2='30.1543'%20y2='1.72858'%20stroke='%234D4D4D'%20stroke-width='0.984375'/%3e%3c/g%3e%3crect%20x='13.7109'%20y='0.851562'%20width='17.5781'%20height='44.2969'%20stroke='%234D4D4D'%20stroke-width='0.703125'/%3e%3cdefs%3e%3cclipPath%20id='clip0_5425_292188'%3e%3crect%20x='13.3594'%20y='0.5'%20width='18.2812'%20height='45'%20fill='white'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e\",\"id\":\"bearing-node-36807361\",\"measured\":{\"width\":300,\"height\":735},\"selected\":false,\"dragging\":false},{\"name\":\"Bearing Node\",\"nodeType\":\"bearing-node\",\"type\":\"bearingNode\",\"position\":{\"x\":2188.7915751207706,\"y\":-136.4740459994067},\"data\":{\"nodeColor\":\"#d3d3d3\",\"strokeColor\":\"#000000\",\"subSystem\":null,\"svgPath\":\"data:image/svg+xml,%3csvg%20width='45'%20height='46'%20viewBox='0%200%2045%2046'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20clip-path='url(%23clip0_5425_292188)'%3e%3crect%20x='13.3594'%20y='0.5'%20width='18.2812'%20height='45'%20fill='%23DCDCDC'/%3e%3cline%20opacity='0.5'%20x1='14.1973'%20y1='1.72857'%20x2='31.0723'%20y2='45.3223'%20stroke='%234D4D4D'%20stroke-width='0.984375'/%3e%3cline%20opacity='0.5'%20x1='13.2793'%20y1='45.3223'%20x2='30.1543'%20y2='1.72858'%20stroke='%234D4D4D'%20stroke-width='0.984375'/%3e%3c/g%3e%3crect%20x='13.7109'%20y='0.851562'%20width='17.5781'%20height='44.2969'%20stroke='%234D4D4D'%20stroke-width='0.703125'/%3e%3cdefs%3e%3cclipPath%20id='clip0_5425_292188'%3e%3crect%20x='13.3594'%20y='0.5'%20width='18.2812'%20height='45'%20fill='white'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e\"},\"svg\":\"data:image/svg+xml,%3csvg%20width='45'%20height='46'%20viewBox='0%200%2045%2046'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20clip-path='url(%23clip0_5425_292188)'%3e%3crect%20x='13.3594'%20y='0.5'%20width='18.2812'%20height='45'%20fill='%23DCDCDC'/%3e%3cline%20opacity='0.5'%20x1='14.1973'%20y1='1.72857'%20x2='31.0723'%20y2='45.3223'%20stroke='%234D4D4D'%20stroke-width='0.984375'/%3e%3cline%20opacity='0.5'%20x1='13.2793'%20y1='45.3223'%20x2='30.1543'%20y2='1.72858'%20stroke='%234D4D4D'%20stroke-width='0.984375'/%3e%3c/g%3e%3crect%20x='13.7109'%20y='0.851562'%20width='17.5781'%20height='44.2969'%20stroke='%234D4D4D'%20stroke-width='0.703125'/%3e%3cdefs%3e%3cclipPath%20id='clip0_5425_292188'%3e%3crect%20x='13.3594'%20y='0.5'%20width='18.2812'%20height='45'%20fill='white'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e\",\"id\":\"bearing-node-37355121\",\"measured\":{\"width\":300,\"height\":735},\"selected\":false,\"dragging\":false,\"style\":{\"width\":225,\"height\":360}},{\"name\":\"Compressor Node\",\"nodeType\":\"compressor-node\",\"type\":\"compressorNode\",\"position\":{\"x\":-1182.5693442982747,\"y\":-471.3306554482391},\"data\":{\"nodeColor\":\"#d3d3d3\",\"strokeColor\":\"#000000\",\"subSystem\":null,\"svgPath\":\"data:image/svg+xml,%3csvg%20width='47'%20height='45'%20viewBox='0%200%2047%2045'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M23.5371%2016.5084L23.5371%2027.4846L0.926554%2033.9135L0.926556%208.82508L23.5371%2016.5084Z'%20fill='url(%23paint0_linear_5425_292293)'%20stroke='%234D4D4D'%20stroke-width='0.309734'/%3e%3cpath%20d='M23.4004%2027.5656V16.5894L46.0109%2010.1605V35.2489L23.4004%2027.5656Z'%20fill='url(%23paint1_linear_5425_292293)'%20stroke='%234D4D4D'%20stroke-width='0.309734'/%3e%3cdefs%3e%3clinearGradient%20id='paint0_linear_5425_292293'%20x1='12.2318'%20y1='33.9135'%20x2='12.2318'%20y2='8.82508'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%23ADADAD'/%3e%3cstop%20offset='0.509615'%20stop-color='%23E3E3E3'/%3e%3cstop%20offset='1'%20stop-color='%23ADADAD'/%3e%3c/linearGradient%3e%3clinearGradient%20id='paint1_linear_5425_292293'%20x1='34.7057'%20y1='10.1605'%20x2='34.7057'%20y2='35.2489'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%23ADADAD'/%3e%3cstop%20offset='0.509615'%20stop-color='%23E3E3E3'/%3e%3cstop%20offset='1'%20stop-color='%23ADADAD'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e\",\"gradientStart\":\"#f5f5f5\",\"gradientEnd\":\"#ADADAD\"},\"svg\":\"data:image/svg+xml,%3csvg%20width='47'%20height='45'%20viewBox='0%200%2047%2045'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M23.5371%2016.5084L23.5371%2027.4846L0.926554%2033.9135L0.926556%208.82508L23.5371%2016.5084Z'%20fill='url(%23paint0_linear_5425_292293)'%20stroke='%234D4D4D'%20stroke-width='0.309734'/%3e%3cpath%20d='M23.4004%2027.5656V16.5894L46.0109%2010.1605V35.2489L23.4004%2027.5656Z'%20fill='url(%23paint1_linear_5425_292293)'%20stroke='%234D4D4D'%20stroke-width='0.309734'/%3e%3cdefs%3e%3clinearGradient%20id='paint0_linear_5425_292293'%20x1='12.2318'%20y1='33.9135'%20x2='12.2318'%20y2='8.82508'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%23ADADAD'/%3e%3cstop%20offset='0.509615'%20stop-color='%23E3E3E3'/%3e%3cstop%20offset='1'%20stop-color='%23ADADAD'/%3e%3c/linearGradient%3e%3clinearGradient%20id='paint1_linear_5425_292293'%20x1='34.7057'%20y1='10.1605'%20x2='34.7057'%20y2='35.2489'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%23ADADAD'/%3e%3cstop%20offset='0.509615'%20stop-color='%23E3E3E3'/%3e%3cstop%20offset='1'%20stop-color='%23ADADAD'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e\",\"id\":\"compressor-node-62642507\",\"measured\":{\"width\":300,\"height\":176},\"selected\":false,\"style\":{\"width\":1457,\"height\":1022},\"dragging\":false},{\"name\":\"Box Node\",\"nodeType\":\"box-node\",\"type\":\"boxNode\",\"position\":{\"x\":275.3240571712516,\"y\":-247.33447622381746},\"data\":{\"nodeColor\":\"#d3d3d3\",\"strokeColor\":\"#000000\",\"subSystem\":null,\"svgPath\":\"data:image/svg+xml,%3csvg%20width='45'%20height='45'%20viewBox='0%200%2045%2045'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20x='11.4327'%20y='0.432692'%20width='21.6346'%20height='44.1346'%20fill='%23E0E0E0'/%3e%3crect%20x='11.4327'%20y='0.432692'%20width='21.6346'%20height='44.1346'%20stroke='%234D4D4D'%20stroke-width='0.865385'/%3e%3c/svg%3e\"},\"svg\":\"data:image/svg+xml,%3csvg%20width='45'%20height='45'%20viewBox='0%200%2045%2045'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20x='11.4327'%20y='0.432692'%20width='21.6346'%20height='44.1346'%20fill='%23E0E0E0'/%3e%3crect%20x='11.4327'%20y='0.432692'%20width='21.6346'%20height='44.1346'%20stroke='%234D4D4D'%20stroke-width='0.865385'/%3e%3c/svg%3e\",\"id\":\"box-node-26786816\",\"measured\":{\"width\":300,\"height\":612},\"selected\":false,\"dragging\":false},{\"name\":\"Bearing Node\",\"nodeType\":\"bearing-node\",\"type\":\"bearingNode\",\"position\":{\"x\":8935.083207767926,\"y\":-351.2078862659224},\"data\":{\"nodeColor\":\"#d3d3d3\",\"strokeColor\":\"#000000\",\"subSystem\":null,\"svgPath\":\"data:image/svg+xml,%3csvg%20width='45'%20height='46'%20viewBox='0%200%2045%2046'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20clip-path='url(%23clip0_5425_292188)'%3e%3crect%20x='13.3594'%20y='0.5'%20width='18.2812'%20height='45'%20fill='%23DCDCDC'/%3e%3cline%20opacity='0.5'%20x1='14.1973'%20y1='1.72857'%20x2='31.0723'%20y2='45.3223'%20stroke='%234D4D4D'%20stroke-width='0.984375'/%3e%3cline%20opacity='0.5'%20x1='13.2793'%20y1='45.3223'%20x2='30.1543'%20y2='1.72858'%20stroke='%234D4D4D'%20stroke-width='0.984375'/%3e%3c/g%3e%3crect%20x='13.7109'%20y='0.851562'%20width='17.5781'%20height='44.2969'%20stroke='%234D4D4D'%20stroke-width='0.703125'/%3e%3cdefs%3e%3cclipPath%20id='clip0_5425_292188'%3e%3crect%20x='13.3594'%20y='0.5'%20width='18.2812'%20height='45'%20fill='white'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e\"},\"svg\":\"data:image/svg+xml,%3csvg%20width='45'%20height='46'%20viewBox='0%200%2045%2046'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20clip-path='url(%23clip0_5425_292188)'%3e%3crect%20x='13.3594'%20y='0.5'%20width='18.2812'%20height='45'%20fill='%23DCDCDC'/%3e%3cline%20opacity='0.5'%20x1='14.1973'%20y1='1.72857'%20x2='31.0723'%20y2='45.3223'%20stroke='%234D4D4D'%20stroke-width='0.984375'/%3e%3cline%20opacity='0.5'%20x1='13.2793'%20y1='45.3223'%20x2='30.1543'%20y2='1.72858'%20stroke='%234D4D4D'%20stroke-width='0.984375'/%3e%3c/g%3e%3crect%20x='13.7109'%20y='0.851562'%20width='17.5781'%20height='44.2969'%20stroke='%234D4D4D'%20stroke-width='0.703125'/%3e%3cdefs%3e%3cclipPath%20id='clip0_5425_292188'%3e%3crect%20x='13.3594'%20y='0.5'%20width='18.2812'%20height='45'%20fill='white'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e\",\"id\":\"bearing-node-11338602\",\"measured\":{\"width\":300,\"height\":735},\"selected\":false,\"dragging\":false},{\"name\":\"Bearing Node\",\"nodeType\":\"bearing-node\",\"type\":\"bearingNode\",\"position\":{\"x\":5131.252479061668,\"y\":-136.4740459994067},\"data\":{\"nodeColor\":\"#d3d3d3\",\"strokeColor\":\"#000000\",\"subSystem\":null,\"svgPath\":\"data:image/svg+xml,%3csvg%20width='45'%20height='46'%20viewBox='0%200%2045%2046'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20clip-path='url(%23clip0_5425_292188)'%3e%3crect%20x='13.3594'%20y='0.5'%20width='18.2812'%20height='45'%20fill='%23DCDCDC'/%3e%3cline%20opacity='0.5'%20x1='14.1973'%20y1='1.72857'%20x2='31.0723'%20y2='45.3223'%20stroke='%234D4D4D'%20stroke-width='0.984375'/%3e%3cline%20opacity='0.5'%20x1='13.2793'%20y1='45.3223'%20x2='30.1543'%20y2='1.72858'%20stroke='%234D4D4D'%20stroke-width='0.984375'/%3e%3c/g%3e%3crect%20x='13.7109'%20y='0.851562'%20width='17.5781'%20height='44.2969'%20stroke='%234D4D4D'%20stroke-width='0.703125'/%3e%3cdefs%3e%3cclipPath%20id='clip0_5425_292188'%3e%3crect%20x='13.3594'%20y='0.5'%20width='18.2812'%20height='45'%20fill='white'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e\"},\"svg\":\"data:image/svg+xml,%3csvg%20width='45'%20height='46'%20viewBox='0%200%2045%2046'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20clip-path='url(%23clip0_5425_292188)'%3e%3crect%20x='13.3594'%20y='0.5'%20width='18.2812'%20height='45'%20fill='%23DCDCDC'/%3e%3cline%20opacity='0.5'%20x1='14.1973'%20y1='1.72857'%20x2='31.0723'%20y2='45.3223'%20stroke='%234D4D4D'%20stroke-width='0.984375'/%3e%3cline%20opacity='0.5'%20x1='13.2793'%20y1='45.3223'%20x2='30.1543'%20y2='1.72858'%20stroke='%234D4D4D'%20stroke-width='0.984375'/%3e%3c/g%3e%3crect%20x='13.7109'%20y='0.851562'%20width='17.5781'%20height='44.2969'%20stroke='%234D4D4D'%20stroke-width='0.703125'/%3e%3cdefs%3e%3cclipPath%20id='clip0_5425_292188'%3e%3crect%20x='13.3594'%20y='0.5'%20width='18.2812'%20height='45'%20fill='white'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e\",\"id\":\"bearing-node-20639428\",\"measured\":{\"width\":300,\"height\":735},\"selected\":false,\"dragging\":false,\"style\":{\"width\":225,\"height\":360}},{\"name\":\"Bearing Node\",\"nodeType\":\"bearing-node\",\"type\":\"bearingNode\",\"position\":{\"x\":7111.252479061668,\"y\":-125.10617175057872},\"data\":{\"nodeColor\":\"#d3d3d3\",\"strokeColor\":\"#000000\",\"subSystem\":null,\"svgPath\":\"data:image/svg+xml,%3csvg%20width='45'%20height='46'%20viewBox='0%200%2045%2046'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20clip-path='url(%23clip0_5425_292188)'%3e%3crect%20x='13.3594'%20y='0.5'%20width='18.2812'%20height='45'%20fill='%23DCDCDC'/%3e%3cline%20opacity='0.5'%20x1='14.1973'%20y1='1.72857'%20x2='31.0723'%20y2='45.3223'%20stroke='%234D4D4D'%20stroke-width='0.984375'/%3e%3cline%20opacity='0.5'%20x1='13.2793'%20y1='45.3223'%20x2='30.1543'%20y2='1.72858'%20stroke='%234D4D4D'%20stroke-width='0.984375'/%3e%3c/g%3e%3crect%20x='13.7109'%20y='0.851562'%20width='17.5781'%20height='44.2969'%20stroke='%234D4D4D'%20stroke-width='0.703125'/%3e%3cdefs%3e%3cclipPath%20id='clip0_5425_292188'%3e%3crect%20x='13.3594'%20y='0.5'%20width='18.2812'%20height='45'%20fill='white'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e\"},\"svg\":\"data:image/svg+xml,%3csvg%20width='45'%20height='46'%20viewBox='0%200%2045%2046'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20clip-path='url(%23clip0_5425_292188)'%3e%3crect%20x='13.3594'%20y='0.5'%20width='18.2812'%20height='45'%20fill='%23DCDCDC'/%3e%3cline%20opacity='0.5'%20x1='14.1973'%20y1='1.72857'%20x2='31.0723'%20y2='45.3223'%20stroke='%234D4D4D'%20stroke-width='0.984375'/%3e%3cline%20opacity='0.5'%20x1='13.2793'%20y1='45.3223'%20x2='30.1543'%20y2='1.72858'%20stroke='%234D4D4D'%20stroke-width='0.984375'/%3e%3c/g%3e%3crect%20x='13.7109'%20y='0.851562'%20width='17.5781'%20height='44.2969'%20stroke='%234D4D4D'%20stroke-width='0.703125'/%3e%3cdefs%3e%3cclipPath%20id='clip0_5425_292188'%3e%3crect%20x='13.3594'%20y='0.5'%20width='18.2812'%20height='45'%20fill='white'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e\",\"id\":\"bearing-node-19259776\",\"measured\":{\"width\":300,\"height\":735},\"selected\":false,\"dragging\":false,\"style\":{\"width\":225,\"height\":360}},{\"name\":\"Turbine Node\",\"nodeType\":\"turbine-node\",\"type\":\"turbineNode\",\"position\":{\"x\":1604.0067760683633,\"y\":-267.4459422124487},\"data\":{\"nodeColor\":\"#d3d3d3\",\"strokeColor\":\"#000000\",\"subSystem\":null,\"svgPath\":\"data:image/svg+xml,%3csvg%20width='45'%20height='47'%20viewBox='0%200%2045%2047'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M1.79297%2014.7809L1.79297%2034.4684L42.3485%2045.9996L42.3485%200.9996L1.79297%2014.7809Z'%20fill='url(%23paint0_linear_5438_291173)'%20stroke='%234D4D4D'%20stroke-width='0.555556'/%3e%3cdefs%3e%3clinearGradient%20id='paint0_linear_5438_291173'%20x1='22.0707'%20y1='45.9996'%20x2='22.0707'%20y2='0.999601'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%23ADADAD'/%3e%3cstop%20offset='0.509615'%20stop-color='%23E3E3E3'/%3e%3cstop%20offset='1'%20stop-color='%23ADADAD'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e\"},\"svg\":\"data:image/svg+xml,%3csvg%20width='45'%20height='47'%20viewBox='0%200%2045%2047'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M1.79297%2014.7809L1.79297%2034.4684L42.3485%2045.9996L42.3485%200.9996L1.79297%2014.7809Z'%20fill='url(%23paint0_linear_5438_291173)'%20stroke='%234D4D4D'%20stroke-width='0.555556'/%3e%3cdefs%3e%3clinearGradient%20id='paint0_linear_5438_291173'%20x1='22.0707'%20y1='45.9996'%20x2='22.0707'%20y2='0.999601'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%23ADADAD'/%3e%3cstop%20offset='0.509615'%20stop-color='%23E3E3E3'/%3e%3cstop%20offset='1'%20stop-color='%23ADADAD'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e\",\"id\":\"turbine-node-80924766\",\"measured\":{\"width\":300,\"height\":333},\"selected\":false,\"style\":{\"width\":585,\"height\":595},\"dragging\":false},{\"name\":\"Bearing Node\",\"nodeType\":\"bearing-node\",\"type\":\"bearingNode\",\"position\":{\"x\":7931.509181336346,\"y\":-133.81167738353997},\"data\":{\"nodeColor\":\"#d3d3d3\",\"strokeColor\":\"#000000\",\"subSystem\":null,\"svgPath\":\"data:image/svg+xml,%3csvg%20width='45'%20height='46'%20viewBox='0%200%2045%2046'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20clip-path='url(%23clip0_5425_292188)'%3e%3crect%20x='13.3594'%20y='0.5'%20width='18.2812'%20height='45'%20fill='%23DCDCDC'/%3e%3cline%20opacity='0.5'%20x1='14.1973'%20y1='1.72857'%20x2='31.0723'%20y2='45.3223'%20stroke='%234D4D4D'%20stroke-width='0.984375'/%3e%3cline%20opacity='0.5'%20x1='13.2793'%20y1='45.3223'%20x2='30.1543'%20y2='1.72858'%20stroke='%234D4D4D'%20stroke-width='0.984375'/%3e%3c/g%3e%3crect%20x='13.7109'%20y='0.851562'%20width='17.5781'%20height='44.2969'%20stroke='%234D4D4D'%20stroke-width='0.703125'/%3e%3cdefs%3e%3cclipPath%20id='clip0_5425_292188'%3e%3crect%20x='13.3594'%20y='0.5'%20width='18.2812'%20height='45'%20fill='white'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e\"},\"svg\":\"data:image/svg+xml,%3csvg%20width='45'%20height='46'%20viewBox='0%200%2045%2046'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20clip-path='url(%23clip0_5425_292188)'%3e%3crect%20x='13.3594'%20y='0.5'%20width='18.2812'%20height='45'%20fill='%23DCDCDC'/%3e%3cline%20opacity='0.5'%20x1='14.1973'%20y1='1.72857'%20x2='31.0723'%20y2='45.3223'%20stroke='%234D4D4D'%20stroke-width='0.984375'/%3e%3cline%20opacity='0.5'%20x1='13.2793'%20y1='45.3223'%20x2='30.1543'%20y2='1.72858'%20stroke='%234D4D4D'%20stroke-width='0.984375'/%3e%3c/g%3e%3crect%20x='13.7109'%20y='0.851562'%20width='17.5781'%20height='44.2969'%20stroke='%234D4D4D'%20stroke-width='0.703125'/%3e%3cdefs%3e%3cclipPath%20id='clip0_5425_292188'%3e%3crect%20x='13.3594'%20y='0.5'%20width='18.2812'%20height='45'%20fill='white'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e\",\"id\":\"bearing-node-36162305\",\"measured\":{\"width\":300,\"height\":735},\"selected\":false,\"dragging\":false,\"style\":{\"width\":225,\"height\":360}},{\"name\":\"Bearing Node\",\"nodeType\":\"bearing-node\",\"type\":\"bearingNode\",\"position\":{\"x\":4830.0678357602865,\"y\":-351.2078862659224},\"data\":{\"nodeColor\":\"#d3d3d3\",\"strokeColor\":\"#000000\",\"subSystem\":null,\"svgPath\":\"data:image/svg+xml,%3csvg%20width='45'%20height='46'%20viewBox='0%200%2045%2046'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20clip-path='url(%23clip0_5425_292188)'%3e%3crect%20x='13.3594'%20y='0.5'%20width='18.2812'%20height='45'%20fill='%23DCDCDC'/%3e%3cline%20opacity='0.5'%20x1='14.1973'%20y1='1.72857'%20x2='31.0723'%20y2='45.3223'%20stroke='%234D4D4D'%20stroke-width='0.984375'/%3e%3cline%20opacity='0.5'%20x1='13.2793'%20y1='45.3223'%20x2='30.1543'%20y2='1.72858'%20stroke='%234D4D4D'%20stroke-width='0.984375'/%3e%3c/g%3e%3crect%20x='13.7109'%20y='0.851562'%20width='17.5781'%20height='44.2969'%20stroke='%234D4D4D'%20stroke-width='0.703125'/%3e%3cdefs%3e%3cclipPath%20id='clip0_5425_292188'%3e%3crect%20x='13.3594'%20y='0.5'%20width='18.2812'%20height='45'%20fill='white'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e\"},\"svg\":\"data:image/svg+xml,%3csvg%20width='45'%20height='46'%20viewBox='0%200%2045%2046'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20clip-path='url(%23clip0_5425_292188)'%3e%3crect%20x='13.3594'%20y='0.5'%20width='18.2812'%20height='45'%20fill='%23DCDCDC'/%3e%3cline%20opacity='0.5'%20x1='14.1973'%20y1='1.72857'%20x2='31.0723'%20y2='45.3223'%20stroke='%234D4D4D'%20stroke-width='0.984375'/%3e%3cline%20opacity='0.5'%20x1='13.2793'%20y1='45.3223'%20x2='30.1543'%20y2='1.72858'%20stroke='%234D4D4D'%20stroke-width='0.984375'/%3e%3c/g%3e%3crect%20x='13.7109'%20y='0.851562'%20width='17.5781'%20height='44.2969'%20stroke='%234D4D4D'%20stroke-width='0.703125'/%3e%3cdefs%3e%3cclipPath%20id='clip0_5425_292188'%3e%3crect%20x='13.3594'%20y='0.5'%20width='18.2812'%20height='45'%20fill='white'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e\",\"id\":\"bearing-node-76702539\",\"measured\":{\"width\":300,\"height\":735},\"selected\":false,\"dragging\":false},{\"name\":\"Heat Exchanger Node\",\"nodeType\":\"heat-exchanger-node\",\"type\":\"heatExchangerNode\",\"position\":{\"x\":-3196.132159799246,\"y\":2260.0991875045493},\"data\":{\"nodeColor\":\"#d3d3d3\",\"strokeColor\":\"#000000\",\"subSystem\":null,\"svgPath\":\"data:image/svg+xml,%3csvg%20width='45'%20height='45'%20viewBox='0%200%2045%2045'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20x='11.6914'%20y='16.6924'%20width='21.125'%20height='1.92046'%20fill='%234D4D4D'/%3e%3crect%20x='11.6914'%20y='19.5731'%20width='21.125'%20height='1.92046'%20fill='%234D4D4D'/%3e%3crect%20x='11.6914'%20y='22.4536'%20width='21.125'%20height='1.92046'%20fill='%234D4D4D'/%3e%3crect%20x='11.6914'%20y='25.3344'%20width='21.125'%20height='1.92046'%20fill='%234D4D4D'/%3e%3cpath%20d='M34.0968%2016.6921C34.7693%2016.6921%2035.4353%2016.8246%2036.0566%2017.082C36.6779%2017.3393%2037.2425%2017.7166%2037.718%2018.1921C38.1936%2018.6677%2038.5708%2019.2322%2038.8282%2019.8535C39.0856%2020.4749%2039.218%2021.1408%2039.218%2021.8134C39.218%2022.4859%2039.0856%2023.1518%2038.8282%2023.7732C38.5708%2024.3945%2038.1936%2024.9591%2037.718%2025.4346C37.2425%2025.9101%2036.6779%2026.2874%2036.0566%2026.5447C35.4353%2026.8021%2034.7693%2026.9346%2034.0968%2026.9346L34.0968%2021.8134L34.0968%2016.6921Z'%20fill='%234D4D4D'/%3e%3cpath%20d='M10.411%2026.9348C9.73848%2026.9348%209.07254%2026.8024%208.4512%2026.545C7.82987%2026.2876%207.26531%2025.9104%206.78976%2025.4348C6.31421%2024.9593%205.93699%2024.3947%205.67962%2023.7734C5.42226%2023.1521%205.28979%2022.4861%205.28979%2021.8136C5.28979%2021.1411%205.42226%2020.4751%205.67962%2019.8538C5.93699%2019.2325%206.31421%2018.6679%206.78976%2018.1924C7.26531%2017.7168%207.82987%2017.3396%208.45121%2017.0822C9.07254%2016.8248%209.73848%2016.6924%2010.411%2016.6924L10.411%2021.8136L10.411%2026.9348Z'%20fill='%234D4D4D'/%3e%3c/svg%3e\"},\"svg\":\"data:image/svg+xml,%3csvg%20width='45'%20height='45'%20viewBox='0%200%2045%2045'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20x='11.6914'%20y='16.6924'%20width='21.125'%20height='1.92046'%20fill='%234D4D4D'/%3e%3crect%20x='11.6914'%20y='19.5731'%20width='21.125'%20height='1.92046'%20fill='%234D4D4D'/%3e%3crect%20x='11.6914'%20y='22.4536'%20width='21.125'%20height='1.92046'%20fill='%234D4D4D'/%3e%3crect%20x='11.6914'%20y='25.3344'%20width='21.125'%20height='1.92046'%20fill='%234D4D4D'/%3e%3cpath%20d='M34.0968%2016.6921C34.7693%2016.6921%2035.4353%2016.8246%2036.0566%2017.082C36.6779%2017.3393%2037.2425%2017.7166%2037.718%2018.1921C38.1936%2018.6677%2038.5708%2019.2322%2038.8282%2019.8535C39.0856%2020.4749%2039.218%2021.1408%2039.218%2021.8134C39.218%2022.4859%2039.0856%2023.1518%2038.8282%2023.7732C38.5708%2024.3945%2038.1936%2024.9591%2037.718%2025.4346C37.2425%2025.9101%2036.6779%2026.2874%2036.0566%2026.5447C35.4353%2026.8021%2034.7693%2026.9346%2034.0968%2026.9346L34.0968%2021.8134L34.0968%2016.6921Z'%20fill='%234D4D4D'/%3e%3cpath%20d='M10.411%2026.9348C9.73848%2026.9348%209.07254%2026.8024%208.4512%2026.545C7.82987%2026.2876%207.26531%2025.9104%206.78976%2025.4348C6.31421%2024.9593%205.93699%2024.3947%205.67962%2023.7734C5.42226%2023.1521%205.28979%2022.4861%205.28979%2021.8136C5.28979%2021.1411%205.42226%2020.4751%205.67962%2019.8538C5.93699%2019.2325%206.31421%2018.6679%206.78976%2018.1924C7.26531%2017.7168%207.82987%2017.3396%208.45121%2017.0822C9.07254%2016.8248%209.73848%2016.6924%2010.411%2016.6924L10.411%2021.8136L10.411%2026.9348Z'%20fill='%234D4D4D'/%3e%3c/svg%3e\",\"id\":\"heat-exchanger-node-84380761\",\"measured\":{\"width\":300,\"height\":93},\"selected\":false,\"style\":{\"width\":1239,\"height\":485},\"dragging\":false},{\"name\":\"Coupling Node\",\"nodeType\":\"coupling-node\",\"type\":\"couplingNode\",\"position\":{\"x\":-2580.9459462981768,\"y\":-57.322810444737286},\"data\":{\"isActive\":false,\"linkedTag\":null,\"subSystem\":null,\"nodeColor\":\"#a9a6a6\",\"strokeColor\":\"#000000\",\"svgPath\":\"data:image/svg+xml,%3csvg%20width='46'%20height='45'%20viewBox='0%200%2046%2045'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20x='4.03854'%20y='16.3847'%20width='37.3846'%20height='12'%20fill='%239A9797'%20stroke='%234D4D4D'%20stroke-width='0.692308'/%3e%3crect%20x='40.7309'%20y='12.3463'%20width='4.15385'%20height='20.0769'%20fill='%239A9797'%20stroke='%234D4D4D'%20stroke-width='0.692308'/%3e%3crect%20x='0.346154'%20y='12.3463'%20width='4.15385'%20height='20.0769'%20fill='%239A9797'%20stroke='%234D4D4D'%20stroke-width='0.692308'/%3e%3c/svg%3e\"},\"svg\":\"data:image/svg+xml,%3csvg%20width='46'%20height='45'%20viewBox='0%200%2046%2045'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20x='4.03854'%20y='16.3847'%20width='37.3846'%20height='12'%20fill='%239A9797'%20stroke='%234D4D4D'%20stroke-width='0.692308'/%3e%3crect%20x='40.7309'%20y='12.3463'%20width='4.15385'%20height='20.0769'%20fill='%239A9797'%20stroke='%234D4D4D'%20stroke-width='0.692308'/%3e%3crect%20x='0.346154'%20y='12.3463'%20width='4.15385'%20height='20.0769'%20fill='%239A9797'%20stroke='%234D4D4D'%20stroke-width='0.692308'/%3e%3c/svg%3e\",\"id\":\"coupling-node-67978692\",\"measured\":{\"width\":300,\"height\":135},\"selected\":false,\"style\":{\"width\":584,\"height\":240},\"dragging\":false},{\"name\":\"KOD Node\",\"nodeType\":\"kod-node\",\"type\":\"kodNode\",\"position\":{\"x\":-1525.0155802809775,\"y\":2026.6884036655615},\"data\":{\"nodeColor\":\"#d3d3d3\",\"strokeColor\":\"#000000\",\"subSystem\":null,\"svgPath\":\"data:image/svg+xml,%3csvg%20width='45'%20height='45'%20viewBox='0%200%2045%2045'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M30.1035%2040.7344H15.709L22.9062%2029.5811L30.1035%2040.7344Z'%20fill='url(%23paint0_linear_5425_291103)'%20stroke='%234D4D4D'%20stroke-width='0.5625'/%3e%3crect%20x='16.1562'%20y='0.28125'%20width='13.5'%20height='35.0625'%20rx='6.75'%20fill='url(%23paint1_linear_5425_291103)'%20stroke='%234D4D4D'%20stroke-width='0.5625'/%3e%3cdefs%3e%3clinearGradient%20id='paint0_linear_5425_291103'%20x1='22.9062'%20y1='29.0625'%20x2='22.9062'%20y2='45'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%23ADADAD'/%3e%3cstop%20offset='0.509615'%20stop-color='%23E3E3E3'/%3e%3cstop%20offset='1'%20stop-color='%23ADADAD'/%3e%3c/linearGradient%3e%3clinearGradient%20id='paint1_linear_5425_291103'%20x1='22.9062'%20y1='0'%20x2='22.9063'%20y2='35.625'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%23ADADAD'/%3e%3cstop%20offset='0.509615'%20stop-color='%23E3E3E3'/%3e%3cstop%20offset='1'%20stop-color='%23ADADAD'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e\"},\"svg\":\"data:image/svg+xml,%3csvg%20width='45'%20height='45'%20viewBox='0%200%2045%2045'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M30.1035%2040.7344H15.709L22.9062%2029.5811L30.1035%2040.7344Z'%20fill='url(%23paint0_linear_5425_291103)'%20stroke='%234D4D4D'%20stroke-width='0.5625'/%3e%3crect%20x='16.1562'%20y='0.28125'%20width='13.5'%20height='35.0625'%20rx='6.75'%20fill='url(%23paint1_linear_5425_291103)'%20stroke='%234D4D4D'%20stroke-width='0.5625'/%3e%3cdefs%3e%3clinearGradient%20id='paint0_linear_5425_291103'%20x1='22.9062'%20y1='29.0625'%20x2='22.9062'%20y2='45'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%23ADADAD'/%3e%3cstop%20offset='0.509615'%20stop-color='%23E3E3E3'/%3e%3cstop%20offset='1'%20stop-color='%23ADADAD'/%3e%3c/linearGradient%3e%3clinearGradient%20id='paint1_linear_5425_291103'%20x1='22.9062'%20y1='0'%20x2='22.9063'%20y2='35.625'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%23ADADAD'/%3e%3cstop%20offset='0.509615'%20stop-color='%23E3E3E3'/%3e%3cstop%20offset='1'%20stop-color='%23ADADAD'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e\",\"id\":\"kod-node-40933400\",\"measured\":{\"width\":300,\"height\":843},\"selected\":false,\"style\":{\"width\":440,\"height\":1003},\"dragging\":false},{\"name\":\"Surface Condenser Node\",\"nodeType\":\"surface-condenser-node\",\"type\":\"surfaceCondenserNode\",\"position\":{\"x\":3734.689536215668,\"y\":2219.870218941661},\"data\":{\"nodeColor\":\"#d3d3d3\",\"strokeColor\":\"#000000\",\"subSystem\":null,\"svgPath\":\"data:image/svg+xml,%3csvg%20width='46'%20height='45'%20viewBox='0%200%2046%2045'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20x='8.27867'%20y='30.7123'%20width='28.0189'%20height='6.79245'%20fill='url(%23paint0_linear_5425_292323)'%20stroke='%234D4D4D'%20stroke-width='0.424528'/%3e%3crect%20x='0.272811'%20y='14.7925'%20width='44.5755'%20height='16.1321'%20rx='1.48585'%20fill='url(%23paint1_linear_5425_292323)'%20stroke='%234D4D4D'%20stroke-width='0.424528'/%3e%3cline%20opacity='0.2'%20x1='4.51793'%20y1='14.5802'%20x2='4.51793'%20y2='31.1368'%20stroke='%234D4D4D'%20stroke-width='0.424528'/%3e%3cline%20opacity='0.2'%20x1='40.9964'%20y1='14.5802'%20x2='40.9964'%20y2='31.1368'%20stroke='%234D4D4D'%20stroke-width='0.424528'/%3e%3cline%20opacity='0.2'%20x1='4.73047'%20y1='16.9151'%20x2='40.8154'%20y2='16.9151'%20stroke='%234D4D4D'%20stroke-width='0.424528'/%3e%3cline%20opacity='0.2'%20x1='4.73047'%20y1='19.8868'%20x2='40.8154'%20y2='19.8868'%20stroke='%234D4D4D'%20stroke-width='0.424528'/%3e%3cline%20opacity='0.2'%20x1='4.73047'%20y1='22.8585'%20x2='40.8154'%20y2='22.8585'%20stroke='%234D4D4D'%20stroke-width='0.424528'/%3e%3cline%20opacity='0.2'%20x1='4.73047'%20y1='25.8302'%20x2='40.8154'%20y2='25.8302'%20stroke='%234D4D4D'%20stroke-width='0.424528'/%3e%3cline%20opacity='0.2'%20x1='4.73047'%20y1='28.8019'%20x2='40.8154'%20y2='28.8019'%20stroke='%234D4D4D'%20stroke-width='0.424528'/%3e%3cdefs%3e%3clinearGradient%20id='paint0_linear_5425_292323'%20x1='22.2881'%20y1='30.5'%20x2='22.2881'%20y2='37.717'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%23ADADAD'/%3e%3cstop%20offset='0.509615'%20stop-color='%23E3E3E3'/%3e%3cstop%20offset='1'%20stop-color='%23ADADAD'/%3e%3c/linearGradient%3e%3clinearGradient%20id='paint1_linear_5425_292323'%20x1='22.5605'%20y1='14.5802'%20x2='22.5605'%20y2='31.1368'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%23ADADAD'/%3e%3cstop%20offset='0.509615'%20stop-color='%23E3E3E3'/%3e%3cstop%20offset='1'%20stop-color='%23ADADAD'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e\"},\"svg\":\"data:image/svg+xml,%3csvg%20width='46'%20height='45'%20viewBox='0%200%2046%2045'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20x='8.27867'%20y='30.7123'%20width='28.0189'%20height='6.79245'%20fill='url(%23paint0_linear_5425_292323)'%20stroke='%234D4D4D'%20stroke-width='0.424528'/%3e%3crect%20x='0.272811'%20y='14.7925'%20width='44.5755'%20height='16.1321'%20rx='1.48585'%20fill='url(%23paint1_linear_5425_292323)'%20stroke='%234D4D4D'%20stroke-width='0.424528'/%3e%3cline%20opacity='0.2'%20x1='4.51793'%20y1='14.5802'%20x2='4.51793'%20y2='31.1368'%20stroke='%234D4D4D'%20stroke-width='0.424528'/%3e%3cline%20opacity='0.2'%20x1='40.9964'%20y1='14.5802'%20x2='40.9964'%20y2='31.1368'%20stroke='%234D4D4D'%20stroke-width='0.424528'/%3e%3cline%20opacity='0.2'%20x1='4.73047'%20y1='16.9151'%20x2='40.8154'%20y2='16.9151'%20stroke='%234D4D4D'%20stroke-width='0.424528'/%3e%3cline%20opacity='0.2'%20x1='4.73047'%20y1='19.8868'%20x2='40.8154'%20y2='19.8868'%20stroke='%234D4D4D'%20stroke-width='0.424528'/%3e%3cline%20opacity='0.2'%20x1='4.73047'%20y1='22.8585'%20x2='40.8154'%20y2='22.8585'%20stroke='%234D4D4D'%20stroke-width='0.424528'/%3e%3cline%20opacity='0.2'%20x1='4.73047'%20y1='25.8302'%20x2='40.8154'%20y2='25.8302'%20stroke='%234D4D4D'%20stroke-width='0.424528'/%3e%3cline%20opacity='0.2'%20x1='4.73047'%20y1='28.8019'%20x2='40.8154'%20y2='28.8019'%20stroke='%234D4D4D'%20stroke-width='0.424528'/%3e%3cdefs%3e%3clinearGradient%20id='paint0_linear_5425_292323'%20x1='22.2881'%20y1='30.5'%20x2='22.2881'%20y2='37.717'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%23ADADAD'/%3e%3cstop%20offset='0.509615'%20stop-color='%23E3E3E3'/%3e%3cstop%20offset='1'%20stop-color='%23ADADAD'/%3e%3c/linearGradient%3e%3clinearGradient%20id='paint1_linear_5425_292323'%20x1='22.5605'%20y1='14.5802'%20x2='22.5605'%20y2='31.1368'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%23ADADAD'/%3e%3cstop%20offset='0.509615'%20stop-color='%23E3E3E3'/%3e%3cstop%20offset='1'%20stop-color='%23ADADAD'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e\",\"id\":\"surface-condenser-node-26980613\",\"measured\":{\"width\":300,\"height\":154},\"selected\":false,\"style\":{\"width\":1201,\"height\":589},\"dragging\":false},{\"name\":\"Centrifugal Pump Node\",\"nodeType\":\"centrifugal-pump-node\",\"type\":\"centrifugalPumpNode\",\"position\":{\"x\":4126.416794012717,\"y\":3342.2939286076044},\"data\":{\"nodeColor\":\"#d3d3d3\",\"strokeColor\":\"#000000\",\"subSystem\":null,\"svgPath\":\"data:image/svg+xml,%3csvg%20width='45'%20height='45'%20viewBox='0%200%2045%2045'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M32.3311%2031.5781H13.2285L22.7793%2018.7119L32.3311%2031.5781Z'%20fill='url(%23paint0_linear_5425_291117)'%20stroke='%234D4D4D'%20stroke-width='0.654431'/%3e%3ccircle%20cx='23.1074'%20cy='18.4893'%20r='9.16204'%20fill='url(%23paint1_linear_5425_291117)'%20stroke='%234D4D4D'%20stroke-width='0.654431'/%3e%3cdefs%3e%3clinearGradient%20id='paint0_linear_5425_291117'%20x1='22.7798'%20y1='18.162'%20x2='22.7798'%20y2='36.4861'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%23ADADAD'/%3e%3cstop%20offset='0.509615'%20stop-color='%23E3E3E3'/%3e%3cstop%20offset='1'%20stop-color='%23ADADAD'/%3e%3c/linearGradient%3e%3clinearGradient%20id='paint1_linear_5425_291117'%20x1='23.1074'%20y1='9'%20x2='23.1074'%20y2='27.9785'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%23ADADAD'/%3e%3cstop%20offset='0.509615'%20stop-color='%23E3E3E3'/%3e%3cstop%20offset='1'%20stop-color='%23ADADAD'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e\",\"gradientStart\":\"#ffffff\",\"gradientEnd\":\"#ADADAD\"},\"svg\":\"data:image/svg+xml,%3csvg%20width='45'%20height='45'%20viewBox='0%200%2045%2045'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M32.3311%2031.5781H13.2285L22.7793%2018.7119L32.3311%2031.5781Z'%20fill='url(%23paint0_linear_5425_291117)'%20stroke='%234D4D4D'%20stroke-width='0.654431'/%3e%3ccircle%20cx='23.1074'%20cy='18.4893'%20r='9.16204'%20fill='url(%23paint1_linear_5425_291117)'%20stroke='%234D4D4D'%20stroke-width='0.654431'/%3e%3cdefs%3e%3clinearGradient%20id='paint0_linear_5425_291117'%20x1='22.7798'%20y1='18.162'%20x2='22.7798'%20y2='36.4861'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%23ADADAD'/%3e%3cstop%20offset='0.509615'%20stop-color='%23E3E3E3'/%3e%3cstop%20offset='1'%20stop-color='%23ADADAD'/%3e%3c/linearGradient%3e%3clinearGradient%20id='paint1_linear_5425_291117'%20x1='23.1074'%20y1='9'%20x2='23.1074'%20y2='27.9785'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%23ADADAD'/%3e%3cstop%20offset='0.509615'%20stop-color='%23E3E3E3'/%3e%3cstop%20offset='1'%20stop-color='%23ADADAD'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e\",\"id\":\"centrifugal-pump-node-72106978\",\"measured\":{\"width\":300,\"height\":349},\"selected\":false,\"style\":{\"width\":466,\"height\":443},\"dragging\":false},{\"name\":\"KOD Node\",\"nodeType\":\"kod-node\",\"type\":\"kodNode\",\"position\":{\"x\":7034.984419719021,\"y\":1966.6884036655615},\"data\":{\"nodeColor\":\"#d3d3d3\",\"strokeColor\":\"#000000\",\"subSystem\":null,\"svgPath\":\"data:image/svg+xml,%3csvg%20width='45'%20height='45'%20viewBox='0%200%2045%2045'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M30.1035%2040.7344H15.709L22.9062%2029.5811L30.1035%2040.7344Z'%20fill='url(%23paint0_linear_5425_291103)'%20stroke='%234D4D4D'%20stroke-width='0.5625'/%3e%3crect%20x='16.1562'%20y='0.28125'%20width='13.5'%20height='35.0625'%20rx='6.75'%20fill='url(%23paint1_linear_5425_291103)'%20stroke='%234D4D4D'%20stroke-width='0.5625'/%3e%3cdefs%3e%3clinearGradient%20id='paint0_linear_5425_291103'%20x1='22.9062'%20y1='29.0625'%20x2='22.9062'%20y2='45'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%23ADADAD'/%3e%3cstop%20offset='0.509615'%20stop-color='%23E3E3E3'/%3e%3cstop%20offset='1'%20stop-color='%23ADADAD'/%3e%3c/linearGradient%3e%3clinearGradient%20id='paint1_linear_5425_291103'%20x1='22.9062'%20y1='0'%20x2='22.9063'%20y2='35.625'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%23ADADAD'/%3e%3cstop%20offset='0.509615'%20stop-color='%23E3E3E3'/%3e%3cstop%20offset='1'%20stop-color='%23ADADAD'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e\"},\"svg\":\"data:image/svg+xml,%3csvg%20width='45'%20height='45'%20viewBox='0%200%2045%2045'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M30.1035%2040.7344H15.709L22.9062%2029.5811L30.1035%2040.7344Z'%20fill='url(%23paint0_linear_5425_291103)'%20stroke='%234D4D4D'%20stroke-width='0.5625'/%3e%3crect%20x='16.1562'%20y='0.28125'%20width='13.5'%20height='35.0625'%20rx='6.75'%20fill='url(%23paint1_linear_5425_291103)'%20stroke='%234D4D4D'%20stroke-width='0.5625'/%3e%3cdefs%3e%3clinearGradient%20id='paint0_linear_5425_291103'%20x1='22.9062'%20y1='29.0625'%20x2='22.9062'%20y2='45'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%23ADADAD'/%3e%3cstop%20offset='0.509615'%20stop-color='%23E3E3E3'/%3e%3cstop%20offset='1'%20stop-color='%23ADADAD'/%3e%3c/linearGradient%3e%3clinearGradient%20id='paint1_linear_5425_291103'%20x1='22.9062'%20y1='0'%20x2='22.9063'%20y2='35.625'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%23ADADAD'/%3e%3cstop%20offset='0.509615'%20stop-color='%23E3E3E3'/%3e%3cstop%20offset='1'%20stop-color='%23ADADAD'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e\",\"id\":\"kod-node-31006926\",\"measured\":{\"width\":300,\"height\":843},\"selected\":false,\"style\":{\"width\":440,\"height\":1003},\"dragging\":false},{\"name\":\"KOD Node\",\"nodeType\":\"kod-node\",\"type\":\"kodNode\",\"position\":{\"x\":7854.984419719021,\"y\":1966.6884036655615},\"data\":{\"nodeColor\":\"#d3d3d3\",\"strokeColor\":\"#000000\",\"subSystem\":null,\"svgPath\":\"data:image/svg+xml,%3csvg%20width='45'%20height='45'%20viewBox='0%200%2045%2045'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M30.1035%2040.7344H15.709L22.9062%2029.5811L30.1035%2040.7344Z'%20fill='url(%23paint0_linear_5425_291103)'%20stroke='%234D4D4D'%20stroke-width='0.5625'/%3e%3crect%20x='16.1562'%20y='0.28125'%20width='13.5'%20height='35.0625'%20rx='6.75'%20fill='url(%23paint1_linear_5425_291103)'%20stroke='%234D4D4D'%20stroke-width='0.5625'/%3e%3cdefs%3e%3clinearGradient%20id='paint0_linear_5425_291103'%20x1='22.9062'%20y1='29.0625'%20x2='22.9062'%20y2='45'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%23ADADAD'/%3e%3cstop%20offset='0.509615'%20stop-color='%23E3E3E3'/%3e%3cstop%20offset='1'%20stop-color='%23ADADAD'/%3e%3c/linearGradient%3e%3clinearGradient%20id='paint1_linear_5425_291103'%20x1='22.9062'%20y1='0'%20x2='22.9063'%20y2='35.625'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%23ADADAD'/%3e%3cstop%20offset='0.509615'%20stop-color='%23E3E3E3'/%3e%3cstop%20offset='1'%20stop-color='%23ADADAD'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e\"},\"svg\":\"data:image/svg+xml,%3csvg%20width='45'%20height='45'%20viewBox='0%200%2045%2045'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M30.1035%2040.7344H15.709L22.9062%2029.5811L30.1035%2040.7344Z'%20fill='url(%23paint0_linear_5425_291103)'%20stroke='%234D4D4D'%20stroke-width='0.5625'/%3e%3crect%20x='16.1562'%20y='0.28125'%20width='13.5'%20height='35.0625'%20rx='6.75'%20fill='url(%23paint1_linear_5425_291103)'%20stroke='%234D4D4D'%20stroke-width='0.5625'/%3e%3cdefs%3e%3clinearGradient%20id='paint0_linear_5425_291103'%20x1='22.9062'%20y1='29.0625'%20x2='22.9062'%20y2='45'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%23ADADAD'/%3e%3cstop%20offset='0.509615'%20stop-color='%23E3E3E3'/%3e%3cstop%20offset='1'%20stop-color='%23ADADAD'/%3e%3c/linearGradient%3e%3clinearGradient%20id='paint1_linear_5425_291103'%20x1='22.9062'%20y1='0'%20x2='22.9063'%20y2='35.625'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%23ADADAD'/%3e%3cstop%20offset='0.509615'%20stop-color='%23E3E3E3'/%3e%3cstop%20offset='1'%20stop-color='%23ADADAD'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e\",\"id\":\"kod-node-15801443\",\"measured\":{\"width\":300,\"height\":843},\"selected\":false,\"style\":{\"width\":440,\"height\":1003},\"dragging\":false},{\"name\":\"KOD Node\",\"nodeType\":\"kod-node\",\"type\":\"kodNode\",\"position\":{\"x\":6214.984419719021,\"y\":1986.6884036655615},\"data\":{\"nodeColor\":\"#d3d3d3\",\"strokeColor\":\"#000000\",\"subSystem\":null,\"svgPath\":\"data:image/svg+xml,%3csvg%20width='45'%20height='45'%20viewBox='0%200%2045%2045'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M30.1035%2040.7344H15.709L22.9062%2029.5811L30.1035%2040.7344Z'%20fill='url(%23paint0_linear_5425_291103)'%20stroke='%234D4D4D'%20stroke-width='0.5625'/%3e%3crect%20x='16.1562'%20y='0.28125'%20width='13.5'%20height='35.0625'%20rx='6.75'%20fill='url(%23paint1_linear_5425_291103)'%20stroke='%234D4D4D'%20stroke-width='0.5625'/%3e%3cdefs%3e%3clinearGradient%20id='paint0_linear_5425_291103'%20x1='22.9062'%20y1='29.0625'%20x2='22.9062'%20y2='45'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%23ADADAD'/%3e%3cstop%20offset='0.509615'%20stop-color='%23E3E3E3'/%3e%3cstop%20offset='1'%20stop-color='%23ADADAD'/%3e%3c/linearGradient%3e%3clinearGradient%20id='paint1_linear_5425_291103'%20x1='22.9062'%20y1='0'%20x2='22.9063'%20y2='35.625'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%23ADADAD'/%3e%3cstop%20offset='0.509615'%20stop-color='%23E3E3E3'/%3e%3cstop%20offset='1'%20stop-color='%23ADADAD'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e\"},\"svg\":\"data:image/svg+xml,%3csvg%20width='45'%20height='45'%20viewBox='0%200%2045%2045'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M30.1035%2040.7344H15.709L22.9062%2029.5811L30.1035%2040.7344Z'%20fill='url(%23paint0_linear_5425_291103)'%20stroke='%234D4D4D'%20stroke-width='0.5625'/%3e%3crect%20x='16.1562'%20y='0.28125'%20width='13.5'%20height='35.0625'%20rx='6.75'%20fill='url(%23paint1_linear_5425_291103)'%20stroke='%234D4D4D'%20stroke-width='0.5625'/%3e%3cdefs%3e%3clinearGradient%20id='paint0_linear_5425_291103'%20x1='22.9062'%20y1='29.0625'%20x2='22.9062'%20y2='45'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%23ADADAD'/%3e%3cstop%20offset='0.509615'%20stop-color='%23E3E3E3'/%3e%3cstop%20offset='1'%20stop-color='%23ADADAD'/%3e%3c/linearGradient%3e%3clinearGradient%20id='paint1_linear_5425_291103'%20x1='22.9062'%20y1='0'%20x2='22.9063'%20y2='35.625'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%23ADADAD'/%3e%3cstop%20offset='0.509615'%20stop-color='%23E3E3E3'/%3e%3cstop%20offset='1'%20stop-color='%23ADADAD'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e\",\"id\":\"kod-node-94966673\",\"measured\":{\"width\":300,\"height\":843},\"selected\":false,\"style\":{\"width\":440,\"height\":1003},\"dragging\":false}]",
    "edges": "[]",
    "saved": true
}
// Define custom node types
const nodeTypes = {
  bearingNode: BearingNode,
  couplingNode: CouplingNode,
  compressorNode: CompressorNode,
  compressorConfigNode: CompressorConfigNode,
  boxNode: BoxNode,
  heatExchangerNode: HeatExchangerNode,
  turbineNode: TurbineNode,
  surfaceCondenserNode: SurfaceCondenserNode,
  kodNode: KODNode,
  centrifugalPumpNode: CentrifugalPumpNode,
  esvNode: ESVNode,
  ejectorNode: EjectorNode,
  textBoxNode: TextboxNode,
  ndeJournalBearingNode: NDEJournalBearingNode,
  v2Node: V2Node,
};

const edgeTypes = {
  flowingPipe: (props) => FlowingPipeEdge({ ...props, type: "default" }),
  flowingPipeFuel: (props) => FlowingPipeEdge({ ...props, type: "fuel" }),
  flowingPipePower: (props) => FlowingPipeEdge({ ...props, type: "power" }),
  flowingPipeHp: (props) => FlowingPipeEdge({ ...props, type: "hp" }),
  flowingPipeMp: (props) => FlowingPipeEdge({ ...props, type: "mp" }),
  flowingPipeLp: (props) => FlowingPipeEdge({ ...props, type: "lp" }),
  flowingPipeWater: (props) => FlowingPipeEdge({ ...props, type: "water" }),
  flowingPipSuspectCondensate: (props) =>
    FlowingPipeEdge({ ...props, type: "suspect" }),
  flowingPipeCleanCondensate: (props) =>
    FlowingPipeEdge({ ...props, type: "clean" }),
  flowingPipeVhp: (props) => FlowingPipeEdge({ ...props, type: "vhp" }),
  flowingPipeAir: (props) => FlowingPipeEdge({ ...props, type: "air" }),
  flowingPipeCoolingWater: (props) =>
    FlowingPipeEdge({ ...props, type: "coolingWater" }),
};


function Flow() {
  const params = useParams();
  const appContext = useRecoilValue(AppAtom);
  const [networkFlowData, setNetworkFlowData] = useRecoilState(networkFlowDataAtom);
  const highlightedNodeType = useRecoilValue(highlightedNodeTypeAtom);
  const [isPageDataLoading, setPageDataLoading] = useState(false);
  const [newNode, setNewNode] = useRecoilState(newNodeAtom);
  const [config, setConfig] = useRecoilState(nodeConfigAtom);
  const [shouldUpdateConfig, setShouldUpdateConfig] =
    useRecoilState(updateConfigAtom);
  const [selectedNodeId, setSelectedNodeId] = useRecoilState(selectedNodeIdAtom);
  const [selectedEdgeId, setSelectedEdgeId] = useRecoilState(selectedEdgeIdAtom);
  const isNetworkLocked = useRecoilValue(networkLockedAtom);
  const [nodeToUpdate, setNodeToUpdate] = useState(null);
  const [isLoading, setLoading] = useState(false);
  const [nodes, setNodes] = useState([]);
  const [edges, setEdges] = useState([]);
  const isDeveloperMode = useRecoilValue(developerModeAtom);
  const [shouldDelete, setShouldDelete] = useRecoilState(deleteAtom);
  const [type, setType] = useRecoilState(dragNodeTypeAtom);
  const [nodeToCopy, setNodeToCopy] = useState(null);
  const [selectedPage, setSelectedPage] = useRecoilState(selectedPageAtom);
  const plantList = useRecoilValue(plantListAtom);
  const updateNodeInternals = useUpdateNodeInternals();
  const { screenToFlowPosition, fitView, zoomTo } = useReactFlow();

  useEffect(() => {
    const loadInitialData = async () => {
      setLoading(true);

      try {
        await new Promise((resolve) => setTimeout(resolve, 1000));
        const parsedNodes = JSON.parse(initialFlowData.nodes);
        const parsedEdges = JSON.parse(initialFlowData.edges);
        setNodes(parsedNodes);
        setEdges(parsedEdges);
        setNetworkFlowData({
          nodes: parsedNodes,
          edges: parsedEdges,
          saved: initialFlowData.saved,
        });
        setTimeout(() => {
          zoomTo(0.5);
          fitView({ duration: 800 });
        }, 100);
      } catch (error) {
        setNodes([]);
        setEdges([]);
      } finally {
        setLoading(false);
      }
    };
    loadInitialData();
  }, [setNodes, setEdges, setNetworkFlowData, fitView, zoomTo]);

  const fitViewWithPadding = useCallback(() => {
    setTimeout(() => {
      fitView({ padding: 0.2, duration: 800 });
    }, 100);
  }, [fitView]);

  useEffect(() => {
    if (nodes.length > 0 && !isDeveloperMode) {
      fitViewWithPadding();
    }
  }, [nodes.length, fitViewWithPadding]);

  useEffect(() => {
    if (shouldDelete) {
      if (selectedNodeId) {
        const newNodes = nodes.filter((node) => node.id !== selectedNodeId);
        const deletedNode = nodes.find((node) => node.id === selectedNodeId);
        setNodes(newNodes);
        setSelectedNodeId(null);
        setConfig(null);
        setShouldDelete(false);
        setEdges(
          [deletedNode].reduce((acc, node) => {
            const connectedEdges = getConnectedEdges([node], edges);
            const remainingEdges = acc.filter(
              (edge) => !connectedEdges.includes(edge),
            );
            return [...remainingEdges];
          }, edges),
        );
      }
      if (selectedEdgeId) {
        const newEdges = edges.filter((edge) => edge.id !== selectedEdgeId);
        setEdges(newEdges);
        setSelectedEdgeId(null);
        setConfig(null);
        setShouldDelete(false);
      }
    }
  }, [shouldDelete, selectedEdgeId, selectedNodeId, nodes, edges]);

  const onNodesChange = useCallback(
    (changes) => {
      if (!isDeveloperMode) return;

      // Process the changes to update the node's data and style
      const updatedNodes = nodes.map((node) => {
        const resizeChange = changes.find(
          (change) => change.type === 'resize' && change.id === node.id
        );

        if (resizeChange) {
          // Create a new object to maintain immutability
          return {
            ...node,
            style: {
              ...node.style,
              width: resizeChange.dimensions.width,
              height: resizeChange.dimensions.height,
            },
            data: {
              ...node.data,
              width: resizeChange.dimensions.width,
              height: resizeChange.dimensions.height,
            },
          };
        }
        return node; // Return the node unchanged if it's not being resized
      });

      // Now apply all changes (including position changes, etc.) on the updated nodes
      setNodes(applyNodeChanges(changes, updatedNodes));
    },
    [nodes, setNodes, isDeveloperMode],
  );

  const onEdgesChange = useCallback(
    (changes) => {
      if (!isDeveloperMode) return;
      setEdges((eds) => applyEdgeChanges(changes, eds));
    },
    [setEdges, isDeveloperMode],
  );

  const onConnect = useCallback(
    (params) => {
      if (!isDeveloperMode) return;
      setEdges((eds) =>
        addEdge(
          {
            ...params,
            type: 'flowingPipe',
            markerEnd: 'flowingPipe',
          },
          eds,
        ),
      );
    },
    [isDeveloperMode],
  );

  const onNodeClick = (event, node) => {
    setSelectedNodeId(node.id);
    setSelectedEdgeId(null);
    setConfig(node);
  };

  const onEdgeClick = (event, edge) => {
    if (!isDeveloperMode) return;
    setSelectedEdgeId(edge.id);
    setSelectedNodeId(null);
    setConfig({ ...edge, configType: 'edge' });
  };

  useEffect(() => {
    if (nodeToUpdate) {
      updateNodeInternals(nodeToUpdate);
      setNodeToUpdate(null);
    }
  }, [nodeToUpdate]);

  useEffect(() => {
    if (shouldUpdateConfig && selectedNodeId) {
      const updatedNodes = nodes.map((node) =>
        node.id === selectedNodeId
          ? {
            ...node,
            data: { ...node.data, ...config.data },
            width: config.data.width,
            height: config.data.height,
          }
          : node,
      );
      setNodeToUpdate(selectedNodeId);
      setNodes(updatedNodes);
      setSelectedNodeId(null);
      setShouldUpdateConfig(false);
    }
  }, [shouldUpdateConfig, config, nodes, selectedNodeId]);

  useEffect(() => {
    if (shouldUpdateConfig && selectedEdgeId) {
      const updatedEdges = edges.map((edge) =>
        edge.id === selectedEdgeId
          ? {
            ...edge,
            type: config.type,
            markerEnd: config.markerEnd,
          }
          : edge,
      );
      setEdges(updatedEdges);
      setSelectedEdgeId(null);
      setShouldUpdateConfig(false);
    }
  }, [shouldUpdateConfig, config, edges, selectedEdgeId]);

  useEffect(() => {
    if (newNode) {
      const newId = `${newNode.nodeType}-${generateRandom8DigitNumber()}`;
      setNodes([
        ...nodes,
        {
          ...newNode,
          id: newId,
        },
      ]);
      setSelectedNodeId(newId);
      setConfig({ ...newNode, id: newId });
      setNewNode(null);
    }
  }, [newNode, nodes]);

  useEffect(() => {
    const handleKeyPress = (e) => {
      if (e.ctrlKey && e.key === 'v' && nodeToCopy) {
        setNewNode(nodeToCopy);
        setNodeToCopy(null);
      }
      if (e.ctrlKey && e.key === 'c' && config && selectedNodeId) {
        setNodeToCopy(config);
      }
      if (e.key === 'Delete' && config) {
        setShouldDelete(true);
      }
    };
    window.addEventListener('keydown', handleKeyPress);
    return () => {
      window.removeEventListener('keydown', handleKeyPress);
    };
  }, [config, nodeToCopy, selectedNodeId]);

  const handleSaveClick = async () => {
    const data = {
      nodeJson: JSON.stringify(nodes),
      edgeJson: JSON.stringify(edges),
    };
    console.log({
      nodes: JSON.stringify(nodes),
      edges: JSON.stringify(edges),
      saved: true,
    });

    setNetworkFlowData({
      nodes: JSON.stringify(nodes),
      edges: JSON.stringify(edges),
      saved: true,
    });
  };

  const onPaneClick = (event) => {
    setConfig(null);
    setSelectedEdgeId(null);
    setSelectedNodeId(null);
  };

  const onDragOver = useCallback((event) => {
    event.preventDefault();
    event.dataTransfer.dropEffect = 'move';
  }, []);

  const onDrop = useCallback(
    (event) => {
      event.preventDefault();
      const position = screenToFlowPosition({
        x: event.clientX,
        y: event.clientY,
      });
      if (!type || !position) {
        return;
      }
      const newNodeData = allNodes.find((x) => x.type === type);
      if (newNodeData) {
        setSelectedNodeId(null);
        setSelectedEdgeId(null);
        setConfig(null);
        setNewNode({ ...newNodeData, position });
        setType(null);
      }
    },
    [screenToFlowPosition, type],
  );

  return (
    <div
      id="react-flow-container"
      style={{ height: '100%', width: '100%', position: 'relative' }}
    >
      {isDeveloperMode && (
        <button
          className={`${styles.saveButton} ${styles.positionPrimaryButton} text-14-regular text-uppercase`}
          id="save-button"
          data-testid="save-button"
          onClick={() => {
            handleSaveClick();
          }}
        >
          {isLoading ? 'Saving...' : 'Save'}
        </button>
      )}
      <>
        <ReactFlow
          nodes={nodes}
          edges={edges}
          onNodesChange={onNodesChange}
          onEdgesChange={onEdgesChange}
          onConnect={onConnect}
          onNodeClick={onNodeClick}
          onEdgeClick={onEdgeClick}
          nodeTypes={nodeTypes}
          edgeTypes={edgeTypes}
          fitView
          fitViewOptions={{ padding: 2000 }}
          minZoom={0.05}
          maxZoom={3}
          nodesDraggable={isDeveloperMode}
          nodesConnectable={isDeveloperMode}
          onInit={fitViewWithPadding}
          onPaneClick={onPaneClick}
          onDrop={onDrop}
          onDragOver={onDragOver}
          style={{ backgroundColor: 'white' }}
        >
          <Marker type="flowingPipe" />
          <Marker type="flowingPipeFuel" />
          <Marker type="flowingPipePower" />
          <Marker type="flowingPipeHp" />
          <Marker type="flowingPipeMp" />
          <Marker type="flowingPipeLp" />
          <Marker type="flowingPipeWater" />
          <Marker type="flowingPipSuspectCondensate" />
          <Marker type="flowingPipeCleanCondensate" />
          <Marker type="flowingPipeAir" />
          <Marker type="flowingPipeCoolingWater" />

          <Controls position="bottom-right" showInteractive={isDeveloperMode} />
          <Background variant={isDeveloperMode ? 'lines' : 'none'} />
        </ReactFlow>
      </>
    </div>
  );
}

export default Flow;